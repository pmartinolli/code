<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revues utiles √† la recherche en histoire √† l‚ÄôUdeM</title>
    <!-- web page displayed at https://pmartinolli.github.io/code/revuesdhistoire/ -->
    <meta name="author" content="Pascal Martinolli">
    <meta name="description" content="Ces listes incluent des titres sp√©cialis√©s en histoire et des titres multidisciplinaires (principalement des revues savantes). Les donn√©es sont automatiquement extraites de Wikidata en temps r√©el.">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .qid-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: monospace;
            resize: vertical;
            outline: none;
            transition: all 0.3s ease;
        }

        .qid-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-help {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .process-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .process-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .process-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            color: #667eea;
            font-size: 18px;
            margin: 20px 0;
            display: none;
        }

        .loading.show {
            display: block;
        }

        .error {
            background: #ffe6e6;
            color: #d63031;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #d63031;
            display: none;
        }

        .error.show {
            display: block;
        }

        .filter-section {
            margin: 30px 0;
            display: none;
        }

        .filter-section.show {
            display: block;
        }

        .filter-title {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clear-filters-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .clear-filters-btn:hover {
            background: #ff5252;
            transform: translateY(-1px);
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .filter-btn {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn:hover {
            background: #f0f4ff;
            transform: translateY(-1px);
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .filter-count {
            background: rgba(255, 255, 255, 0.3);
            padding: 2px 2px;
            border-radius: 8px;
            font-size: 8px;
            font-weight: bold;
        }

        .filter-btn.active .filter-count {
            background: rgba(255, 255, 255, 0.2);
        }

        .demo-section {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .demo-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .demo-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .demo-btn:hover {
            background: #5a6fd8;
        }
		
        .results-section {
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .results-count {
            color: #666;
            font-size: 16px;
        }

        .export-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .results-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #f0f0f0;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            vertical-align: top;
        }

        tr:hover {
            background: #f8f9ff;
        }

        .qid-link {
            color: #667eea;
            text-decoration: none;
            font-family: monospace;
            font-weight: bold;
        }

        .qid-link:hover {
            text-decoration: underline;
        }

        .website-link {
            color: #28a745;
            text-decoration: none;
            font-weight: 500;
        }

        .website-link:hover {
            text-decoration: underline;
        }

        .subject-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .subject-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            border: 1px solid #e0e8ff;
        }

        .no-data {
            color: #999;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .filter-buttons {
                gap: 8px;
            }
            
            .filter-btn {
                padding: 8px 15px;
                font-size: 13px;
            }
            
            th, td {
                padding: 10px 8px;
                font-size: 14px;
            }
            
            .results-header {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Revues utiles √† la recherche en histoire √† l‚ÄôUdeM</h1>
        <p>
        Ces listes incluent des revues savantes en sp√©cialis√©es en histoire ou dans des domaines touchant l'histoire. Les donn√©es sont automatiquement extraites de Wikidata en temps r√©el et elles peuvent donc contenir des lacunes ou des erreurs. Vous √™tes chaleureusement invit√©s √† contribuer √† Wikidata pour am√©liorer ces donn√©es (contacter votre <a href="https://boite-outils.bib.umontreal.ca/etudes-religieuses-histoire-philosophie/histoire">biblioth√©caire en histoire</a> qui se fera un plaisir de vous guider). <a href="faq.html">FAQ</a> pour en savoir plus.
        </p>
        <p><br>        </p>
        <div class="input-section">
            <h4>üìù Saisir les identifiants Wikidata (QIDs) des revues √† afficher, ou Charger les donn√©es automatiquement depuis :</h4>
			            <button class="demo-btn" onclick="loadBibData()">Liste du biblioth√©caire (370+)</button>
						<button class="demo-btn" onclick="loadDOAJData()">Liste 'histoire' du DOAJ (680+)</button>
            			<button class="demo-btn" onclick="loadSCIMAGOJRData()">Liste 'histoire' du ScimagoJR (960+)</button>
                        <button class="demo-btn" onclick="loadJCRData()">Liste 'histoire' du JCR (680+)</button>
            <textarea 
                class="qid-input" 
                id="qidInput" 
                placeholder="Saisir les QIDs s√©par√©s par des virgules, des espaces ou un par ligne."
            ></textarea>
            <div class="input-help">Saisir les QIDs s√©par√©s par des virgules, des espaces ou un par ligne.</div>
            <button class="process-btn" onclick="processQIDs()" id="processBtn">
                üöÄ Traitement des QIDs
            </button>
        </div>

        <div class="loading" id="loading">üîÑ Traitement des QIDs et extraction des donn√©es...</div>
        <div class="error" id="error"></div>

        <div class="filter-section" id="filterSection">
            <div class="filter-title">
                üè∑Ô∏è Filtrer par sujet (P921)
                <button class="clear-filters-btn" onclick="clearAllFilters()">R√©initialiser</button>
            </div>
            <div class="filter-buttons" id="filterButtons"></div>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <div class="results-count" id="resultsCount"></div>
            <!--    <button class="export-btn" onclick="exportToCSV()">üìä Exporter en CSV</button>  -->
            </div>
            <div class="results-table">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>QID</th>
                                <th>Nom de la revue</th>
                                <th>Site web officiel (P856) et recherche dans Sofia UdeM</th>
                                <th>Sujets (P921)</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
		<p>Chercheuses et chercheurs UdeM : L‚Äôacc√®s depuis l‚Äôext√©rieur du campus √† la plupart des revues en version √©lectronique n√©cessite la configuration du <a href="https://studio.bib.umontreal.ca/informatique/proxy/">proxy</a>. Les biblioth√®ques/UdeM n‚Äôont pas n√©cessairement un abonnement courant ou un acc√®s aux archives compl√®tes des revues list√©es ci-dessous. Si l‚Äôarticle voulu n‚Äôest pas disponible dans les abonnements UdeM, faites une demande de <a href="https://bib.umontreal.ca/obtenir/peb/">pr√™t entre biblioth√®ques</a>. Article disponible en papier seulement ? Faites une <a href="https://bib.umontreal.ca/obtenir/numerisation"> demande de num√©risation</a>.
    </div>

    <script>
    let allEntities = [];
    let filteredEntities = [];
    let activeFilters = new Set();
    let subjectCounts = new Map();

    // ‚úÖ Allowed QIDs for filters (list of history topics relevant for the Department
    const allowedSubjects = new Set([
                                     "Q41493", // ancient history
                                     "Q27992545", // medieval history
                                     "Q3281534", // modern period
                                     "Q186075", // contemporary history
                                     "Q192781", // military history
                                     "Q111938447", // history of peace
                                     "Q109577608", // history of genocide
                                     "Q149813", // history of Africa
                                     "Q627531", // history of Asia
                                     "Q82972", // history of China
                                     "Q2945", // history of Canada
                                     "Q7787", // history of Europe
                                     "Q7778", // history of France
                                     "Q7791", // history of Italy
                                     "Q113162", // history of the United Kingdom
                                     "Q205157", // history of Ireland
                                     "Q131110", // history of the United States
                                     "Q2365406", // history of Latin America
                                     "Q4816595", // Atlantic world 
                                     "Q55022436", // history of international relations
                                     "Q3245246", // history of colonialism
                                     "Q1279400", // women's history
                                     "Q1517835", // gender history
                                     "Q105960891", // history of indigenous peoples
                                     "Q908604", // social history
                                     "Q858517", // cultural history
                                     "Q680004", // legal history
                                     "Q1147507", // political history
                                     "Q846742", // history of religions
                                     "Q642379", // history of Islam
                                     "Q12211529", // Middle Eastern studies
                                     "Q3137714", // history of Maghreb
                                     "Q3621186", // Arabic studies
                                     "Q12408688", // Palestinian studies
                                     "Q135999455", // history of youth
                                     "Q4204823", // history of childhood
                                     "Q201486", // history of science
                                     "Q380274", // history of medicine
                                     "Q1195695", // intellectual history
                                     "Q570018", // history of ideas
                                     "Q50675", // historiography
                                     "Q59029", // labor history
                                     "Q47398", // economic history
                                     "Q952080", // history of agriculture
                                     "Q7380580", // rural history
                                     "Q1561862", // environmental history
                                     "Q1569011", // urban history
		                             "Q1026962", // digital humanities
									]);

    async function processQIDs() {
        const input = document.getElementById('qidInput').value.trim();
        if (!input) {
            showError('Saisir au moins un QID.');
            return;
        }

        const qids = parseQIDs(input);
        if (qids.length === 0) {
            showError('Aucun QID valide rep√©r√©. V√©rifier le format d\'importation.');
            return;
        }

        showLoading(true);
        hideError();
        hideResults();
        
        const processBtn = document.getElementById('processBtn');
        processBtn.disabled = true;

        try {
            allEntities = [];
            subjectCounts.clear();

            const batchSize = 50;
            for (let i = 0; i < qids.length; i += batchSize) {
                const batch = qids.slice(i, i + batchSize);
                const batchEntities = await fetchEntities(batch);
                allEntities = allEntities.concat(batchEntities);
            }

            if (allEntities.length === 0) {
                showError('Pas d\'entit√© valide rep√©r√©e pour les QIDs soumis.');
                return;
            }

            countSubjects();
            filteredEntities = [...allEntities];
            activeFilters.clear();

            displayFilterButtons();
            displayResults();
            showResults();

        } catch (error) {
            console.error('Erreur lors du traitement des QIDs:', error);
            showError('Erreur lors du traitement des QIDs. Merci de relancer.');
        } finally {
            showLoading(false);
            processBtn.disabled = false;
        }
    }

    function loadBibData() {
        document.getElementById('qidInput').value = 'Q96696272, Q27715829, Q81661038, Q1533284, Q15761069, Q15734637, Q1526607, Q3137027, Q15750588, Q15710144, Q50811044, Q15758694, Q106490184, Q15801092, Q689414, Q6094746, Q63871834, Q15755664, Q1709853, Q6295426, Q15765711, Q3195472, Q616020, Q6467369, Q1877757, Q15753276, Q96716175, Q15275990, Q3346085, Q3346085, Q15762524, Q15761409, Q3409088, Q15754916, Q3428644, Q3428655, Q15814307, Q96324577, Q15766804, Q15757288, Q15757664, Q15757664, Q2261617, Q21031268, Q7575349, Q15752327, Q3517743, Q4744238, Q15749777, Q15762044, Q6020500, Q135989947, Q1742895, Q1809405, Q1004380, Q100791855, Q1032140, Q1053506, Q12005743, Q1205540, Q1217470, Q12645928, Q1268287, Q13375921, Q135792875, Q1399128, Q1541522, Q15707062, Q15707255, Q15707591, Q15708751, Q15708755, Q15709942, Q15709997, Q15709999, Q15710019, Q15716415, Q15716472, Q15724318, Q15745485, Q15746414, Q15749144, Q15749180, Q15749508, Q15749776, Q15749884, Q15750390, Q15750595, Q15750597, Q15750599, Q15750824, Q15751048, Q15751064, Q15751367, Q15751404, Q15751912, Q15751915, Q15751916, Q15751919, Q15752249, Q15752254, Q15752619, Q15752880, Q15752909, Q15753021, Q15753940, Q15753969, Q15754164, Q15754166, Q15754205, Q15754233, Q15754660, Q15754673, Q15754782, Q15754934, Q15754937, Q15755088, Q15755506, Q15755698, Q15755753, Q15755838, Q15755884, Q15755967, Q15756341, Q15756768, Q15756856, Q15757227, Q15757370, Q15757374, Q15757440, Q15757849, Q15757850, Q15758055, Q15758309, Q15758315, Q15758334, Q15758545, Q15758695, Q15758956, Q15759472, Q15759585, Q15759681, Q15759835, Q15759935, Q15760379, Q15760438, Q15760613, Q15760677, Q15760776, Q15760865, Q15760922, Q15761039, Q15761095, Q15761399, Q15761462, Q15761629, Q15761724, Q15762030, Q15762035, Q15762062, Q15762500, Q15762913, Q15763495, Q15764205, Q15764347, Q15764382, Q15765029, Q15765325, Q15765353, Q15765436, Q15765973, Q15766034, Q15766075, Q15766082, Q15766240, Q15766318, Q15766738, Q15767254, Q15767415, Q15767557, Q15767598, Q15767675, Q1579604, Q15814375, Q15817137, Q15817925, Q1608596, Q1679951, Q1709867, Q1709879, Q1710787, Q1716917, Q1783145, Q1810221, Q186717, Q1941227, Q19851135, Q20081140, Q21020985, Q2166804, Q22811529, Q2366889, Q23759748, Q2403870, Q2415267, Q24238738, Q2503342, Q26849526, Q26849617, Q27715641, Q27715679, Q27715859, Q27715919, Q27716594, Q27719001, Q27719037, Q27722635, Q27921636, Q2810781, Q2823586, Q282477, Q2844846, Q2845020, Q2850663, Q2850699, Q2860195, Q28603621, Q29043990, Q29059279, Q2918516, Q2928051, Q2928071, Q2933107, Q2933112, Q2933113, Q2933118, Q2933121, Q2933128, Q2933146, Q2979361, Q3026028, Q3098897, Q3100810, Q3136533, Q3136538, Q3186955, Q3224839, Q3276833, Q3313811, Q3332702, Q3416479, Q3421962, Q3421969, Q3421978, Q3421979, Q3424061, Q3428620, Q3428642, Q3428645, Q3428647, Q3428649, Q3428676, Q3428686, Q3428697, Q3560263, Q3586209, Q3592587, Q389936, Q3926551, Q42020894, Q4391074, Q4652083, Q465332, Q4668339, Q4689758, Q471378, Q4744109, Q4744221, Q4744251, Q47456350, Q47518673, Q4763427, Q4775205, Q4806750, Q4824354, Q4996846, Q50520948, Q50534447, Q5061045, Q50808285, Q50814520, Q50815451, Q50815455, Q50816573, Q5128255, Q5134329, Q5155627, Q5164979, Q5349065, Q53952813, Q53953010, Q53966481, Q53967759, Q5404381, Q5412665, Q5421342, Q5449598, Q5501783, Q5501784, Q55174624, Q5530932, Q55397544, Q5618698, Q5676459, Q56825794, Q56825810, Q56825923, Q57064282, Q57244325, Q57274302, Q5773941, Q5774620, Q5774685, Q5774776, Q58214283, Q58335332, Q5937513, Q6294759, Q6294876, Q6294983, Q6295197, Q6295549, Q6295853, Q6295929, Q6295955, Q6296028, Q6296147, Q635611, Q635850, Q63871836, Q6467152, Q6495229, Q6496242, Q6553313, Q66115552, Q6815693, Q6888570, Q6888582, Q6979868, Q7278875, Q7318402, Q7550788, Q7628021, Q7721734, Q7722548, Q7731520, Q7739760, Q7739760, Q7743549, Q7743575, Q7743576, Q7753584, Q81849192, Q856645, Q88349845, Q88977165, Q94153204, Q96321132, Q96699572, Q96700952, Q96701593, Q96702190, Q96725331, Q9182836, Q1277520, Q3365487, Q136090518, Q136101450, Q50817399, Q134611523, Q96720095';
    }
	
	function loadSCIMAGOJRData() {
            document.getElementById('qidInput').value = 'Q15753395, Q15750390, Q389936, Q4744251, Q2911917, Q4778488, Q15758052, Q15749549, Q15756606, Q27715541, Q23739791, Q15765276, Q871189, Q15749179, Q2933118, Q15762035, Q57584928, Q12360657, Q65041336, Q1716917, Q15708755, Q7268452, Q27715794, Q15751263, Q15759880, Q15759587, Q10524607, Q15746130, Q1620986, Q6067349, Q6067557, Q689414, Q27715977, Q2256353, Q2412214, Q15707062, Q6294950, Q12645928, Q1273053, Q7743575, Q6295386, Q15710011, Q6295853, Q15755506, Q15755502, Q15753668, Q15755920, Q27715952, Q6467172, Q15766008, Q55174566, Q3293267, Q6904208, Q3224839, Q7753584, Q3944882, Q1689370, Q15758107, Q11939515, Q7135216, Q7163760, Q7186103, Q15814210, Q24525511, Q27716138, Q84563357, Q3428642, Q3428740, Q2155659, Q7061723, Q7762641, Q7764766, Q15753302, Q15734614, Q15761362, Q53952291, Q1652794, Q15759340, Q96724708, Q15755778, Q1263938, Q7928932, Q4125003, Q7981920, Q186801, Q186678, Q15756235, Q15750864, Q4787315, Q15761967, Q10524626, Q15755835, Q15710010, Q3428655, Q12646949, Q76998312, Q21386219, Q15761392, Q15756384, Q1283097, Q27722323, Q15764180, Q15817789, Q96332072, Q15756127, Q15761170, Q96324877, Q106762179, Q15759627, Q27716108, Q15745398, Q15755292, Q10662410, Q7628020, Q50425207, Q96333976, Q15751411, Q17619382, Q7210240, Q15757290, Q27716425, Q4821243, Q15755046, Q96729749, Q96326422, Q50432892, Q15816496, Q27718942, Q15765658, Q27716584, Q96735792, Q56338197, Q28674098, Q43755801, Q15752708, Q15752062, Q15793430, Q15760555, Q15757670, Q15759370, Q15760379, Q15765260, Q59772450, Q15753275, Q96333983, Q96326153, Q96326345, Q96334062, Q1317529, Q856667, Q15750599, Q27963511, Q96329111, Q15760254, Q15764884, Q15753664, Q15759407, Q26707709, Q84588333, Q50403241, Q15755314, Q15751672, Q15749627, Q15749624, Q15750588, Q15763491, Q15754890, Q64507706, Q12055873, Q17619390, Q15757374, Q480577, Q96700155, Q186038, Q15761959, Q15763833, Q15760713, Q7735257, Q7138992, Q102290824, Q15763184, Q15760907, Q96328684, Q7758693, Q3926551, Q15765831, Q15762332, Q5035430, Q15765224, Q3330664, Q15710144, Q11169709, Q186616, Q15763693, Q12281904, Q50434980, Q7168869, Q6185190, Q1409380, Q15764033, Q1766626, Q15751723, Q12806662, Q15759615, Q15764370, Q15762838, Q96716220, Q12799548, Q12640938, Q15749190, Q11999656, Q15754501, Q15758694, Q4652083, Q5030601, Q27716596, Q27716412, Q15764290, Q96709016, Q110589056, Q15754999, Q3745516, Q3098897, Q20081140, Q50403023, Q15766445, Q6467369, Q15762913, Q96721380, Q50478579, Q65929208, Q50814224, Q50481552, Q96328655, Q27721630, Q50814365, Q105712889, Q50481538, Q96706350, Q15764581, Q96334403, Q15750597, Q6507338, Q15753079, Q4751015, Q27723088, Q15764791, Q15751370, Q50497476, Q11379546, Q4397976, Q15765360, Q15759112, Q50817893, Q15734636, Q15764128, Q15760447, Q96334820, Q96328914, Q15755970, Q96333991, Q96328876, Q96328885, Q96328897, Q96332530, Q15754347, Q15749346, Q27715829, Q15764175, Q15766737, Q5530932, Q15757288, Q4783420, Q15766888, Q5412087, Q4751657, Q7968612, Q6295549, Q6020249, Q15753477, Q60330914, Q6020500, Q57315389, Q24911767, Q3136533, Q15751912, Q15755381, Q15752692, Q50497832, Q96724414, Q27716402, Q4672768, Q6296065, Q15707782, Q15759352, Q96704414, Q5323289, Q15757174, Q15763434, Q4846673, Q15749790, Q15817904, Q6984368, Q27725268, Q7692591, Q4942937, Q15763430, Q96326295, Q96332358, Q1384169, Q15765982, Q15817723, Q102467345, Q4040686, Q96324661, Q96329877, Q50497955, Q96326991, Q15761069, Q15759371, Q65618887, Q27721632, Q15750738, Q15757877, Q15759590, Q27063807, Q15746155, Q15762386, Q15752920, Q4777706, Q15759626, Q22341243, Q131178535, Q64507319, Q15759589, Q50498055, Q28045170, Q15750600, Q27966326, Q3100984, Q15763495, Q19874809, Q13434884, Q96705943, Q15758035, Q15750589, Q96326056, Q2933146, Q2933134, Q73908443, Q15753083, Q96733855, Q96706593, Q15762585, Q96326286, Q15760414, Q15766801, Q15764348, Q96331238, Q17151354, Q96327778, Q96330732, Q96330875, Q96330029, Q96333963, Q96324458, Q15746490, Q15814228, Q6295920, Q15756057, Q15756399, Q15763635, Q15749290, Q15761275, Q96327662, Q15754418, Q15749922, Q15754390, Q4787289, Q15753771, Q96325843, Q15765731, Q12358496, Q96334631, Q96331312, Q15754898, Q27722714, Q96331802, Q96699556, Q15752339, Q15761467, Q3186897, Q15755505, Q15710168, Q7550865, Q15767665, Q15710147, Q7148412, Q6295251, Q7727851, Q15752888, Q4970183, Q15756793, Q6979813, Q385919, Q15759439, Q5380365, Q6295754, Q603149, Q15716415, Q15767088, Q15816896, Q4744365, Q15710008, Q15760860, Q5165411, Q7739760, Q7743549, Q7012075, Q7628046, Q7732615, Q15752509, Q15759355, Q2503342, Q4743492, Q15753874, Q6294705, Q15752695, Q15754888, Q15758956, Q6296188, Q15752880, Q96331035, Q20035440, Q9347342, Q50516908, Q50814383, Q50816338, Q15746414, Q15756845, Q15752233, Q5774620, Q7927331, Q4984286, Q4914884, Q6438568, Q6294981, Q6294983, Q15749777, Q15762783, Q7122492, Q15758090, Q7578151, Q15757297, Q2918516, Q7743638, Q1739521, Q15707472, Q27715887, Q15734627, Q8026525, Q5866179, Q2811847, Q15745485, Q6467152, Q15758334, Q64372057, Q15766497, Q96332255, Q96328881, Q96326165, Q97756311, Q96334012, Q15764292, Q1809405, Q7923855, Q2529004, Q4689977, Q57584772, Q96325385, Q15753024, Q15759177, Q4790506, Q15761063, Q15760000, Q15767425, Q96326090, Q15764243, Q96330036, Q59289096, Q7091310, Q2258877, Q15746151, Q96334019, Q15716625, Q15760250, Q96704532, Q50518133, Q50518127, Q52196360, Q15762519, Q15750598, Q15749629, Q96326244, Q1213559, Q96329139, Q50814530, Q12159072, Q15765711, Q186065, Q15756233, Q186800, Q96333773, Q21233170, Q1651429, Q59468117, Q15755884, Q96725996, Q15758990, Q56317201, Q96706805, Q96725244, Q6430302, Q96330025, Q96727939, Q96333681, Q27726840, Q2902198, Q15757063, Q135336822, Q15750956, Q52158487, Q1032140, Q15759410, Q15763283, Q15761363, Q96334728, Q5984884, Q15716432, Q15765357, Q15746686, Q15764557, Q15749375, Q15764168, Q6807053, Q3486571, Q15814342, Q15817868, Q6571575, Q15753526, Q6746655, Q15767281, Q15761370, Q28807437, Q15716628, Q15762166, Q43379078, Q15760916, Q7628082, Q56317766, Q15814341, Q107192447, Q15708889, Q15814345, Q6295892, Q4787299, Q15761780, Q27727641, Q15767556, Q3186854, Q3365487, Q3428647, Q13416949, Q96724945, Q3076430, Q15765775, Q5382167, Q15752713, Q15767566, Q15762500, Q15817591, Q50534592, Q50814589, Q96333938, Q50534543, Q104503263, Q15749359, Q27718715, Q96704314, Q15751178, Q15756647, Q96328799, Q15751353, Q15816965, Q96334586, Q96331520, Q96330661, Q15760575, Q96329054, Q50553215, Q15755175, Q96730421, Q50814771, Q50521456, Q15760940, Q5134329, Q186809, Q28160598, Q96330062, Q53952822, Q96324840, Q96334050, Q96332525, Q96326271, Q60847859, Q5165794, Q96331264, Q96325974, Q96330052, Q27436709, Q56887191, Q96331374, Q56293427, Q96326214, Q15816980, Q96325342, Q96695774, Q15752899, Q50667848, Q96697509, Q50426519, Q27722633, Q15766034, Q27715679, Q15750595, Q96335083, Q105015370, Q15817951, Q56254713, Q5866092, Q15746137, Q15761696, Q1973202, Q5195051, Q15763453, Q15816949, Q15814343, Q6295547, Q15754101, Q63928581, Q15765011, Q15762529, Q96328934, Q15753561, Q96720759, Q15816414, Q124351504, Q54131776, Q96720654, Q15764647, Q15760251, Q26305317, Q15751449, Q96328042, Q50808226, Q96710084, Q96735479, Q50668754, Q50808209, Q10669319, Q50815037, Q27722615, Q27724978, Q27716122, Q50815106, Q50808251, Q28868226, Q15757036, Q50815215, Q50808247, Q50808237, Q15758241, Q60040607, Q91644408, Q50815179, Q50808293, Q7703209, Q15816478, Q6094746, Q15816710, Q1550212, Q4970991, Q63871831, Q96328233, Q15762873, Q15746141, Q56823466, Q15757989, Q50815260, Q56696298, Q5017412, Q63871644, Q47545087, Q69560504, Q63871834, Q50808378, Q50552832, Q50808342, Q55658698, Q20807896, Q3509007, Q63993614, Q96330987, Q50808454, Q11826633, Q24525533, Q17619372, Q96700577, Q50815451, Q3428701, Q96328683, Q50815519, Q6294738, Q15817140, Q96703006, Q27726174, Q29043794, Q47458802, Q96327245, Q96705924, Q96732833, Q4033164, Q96330890, Q4836917, Q15709983, Q50810765, Q50815662, Q50815654, Q15766535, Q50815648, Q105710857, Q50815770, Q10321024, Q116885635, Q15758284, Q15766981, Q96713646, Q1935026, Q96328980, Q186830, Q1743334, Q50816131, Q96708102, Q15751919, Q15754362, Q96332698, Q50807146, Q135742290, Q96328903, Q96330636, Q50807154, Q63092347, Q96733089, Q96327188, Q50807174, Q96320495, Q48814692, Q96734872, Q50810950, Q96717840, Q20529522, Q24914818, Q50553162, Q56886923, Q96706396, Q50432848, Q130324649, Q96725553, Q52160230, Q15750592, Q50816354, Q27996900, Q96328972, Q96703517, Q50810742, Q15750078, Q135654478, Q96333930, Q50811189, Q135927554, Q50816482, Q50816582, Q96334921, Q9182836, Q60105390, Q91776627, Q50811335, Q15749659, Q96716955, Q4455439, Q96324944, Q50808401, Q50816687, Q50497554, Q50811444, Q96726383, Q50811435, Q50811394, Q50816773, Q57315347, Q50811642, Q29043967, Q54941028, Q96329446, Q50811635, Q26849594, Q50816996, Q55760095, Q63871610, Q63991660, Q12057714, Q96706432, Q96730135, Q15750602, Q26319487, Q15766734, Q50497937, Q50816941, Q96698766, Q50518124, Q50811784, Q80452753, Q50478627, Q50811774, Q12360180, Q24911218, Q96696267, Q96327352, Q50817117, Q48842799, Q50817148, Q96732363, Q15751456, Q186753, Q63871648, Q26849518, Q50431732, Q51122343, Q63871645, Q96727306, Q50817326, Q50518146, Q50521444, Q50817341, Q21057404, Q96722597, Q9338524, Q50812145, Q135926953, Q135741778, Q88966995, Q120769266, Q50808155, Q96733793, Q96334288, Q101010757, Q73908428, Q50815187, Q135927414, Q50504637, Q15751671, Q7238215, Q27715768, Q96324887, Q11828478, Q96324499, Q50812357, Q15762578, Q96738388, Q28119910, Q55810461, Q96727721, Q96710831, Q96324577, Q135927435, Q96706816, Q50817763, Q44281020, Q55086326, Q15766104, Q96714870, Q96726769, Q50478724, Q91638718, Q50520781, Q96713506, Q58234452, Q15754200, Q29914116, Q96332454, Q111198802, Q96326360, Q102825251, Q96700869, Q96327894, Q50808424, Q96334795, Q96738165, Q15817775, Q96707953, Q27719030, Q85097495, Q15746142, Q15756155, Q96720310, Q96699521, Q96736339, Q96706429, Q96725705, Q96329462, Q96706130, Q96734041, Q96711241, Q96712514, Q135927579, Q50817567, Q50534310, Q131144126, Q104527696, Q15764894, Q27716613, Q102828991, Q96718023, Q50817418, Q104144852, Q96738635, Q60861467, Q96725640, Q116879650, Q96735816, Q19720531, Q15766677, Q131938890, Q135927476, Q96705816, Q96726813, Q96704031, Q4943578, Q96706554, Q96717529, Q124150526, Q96708750, Q96731245, Q135649337, Q104527492, Q96713660, Q36937339, Q11776816, Q15749779, Q135741819, Q127599661, Q96706412, Q11795721,  ';
		}

	function loadDOAJData() {
            document.getElementById('qidInput').value = 'Q15762944, Q15761126, Q11052884, Q15759587, Q27722316, Q15746130, Q315571, Q27715951, Q6431659, Q11751600, Q6450229, Q27716025, Q84563357, Q57315441, Q6107109, Q15755235, Q9386958, Q15750864, Q11956877, Q27921636, Q15751449, Q15757182, Q11692034, Q964573, Q5773182, Q15817789, Q114240, Q15766535, Q96332072, Q96727721, Q27716108, Q15762599, Q9338523, Q50425207, Q9347375, Q17619382, Q15753561, Q50426299, Q50432823, Q27722250, Q96720759, Q96729749, Q50432848, Q50426380, Q15754723, Q50426444, Q96326422, Q27715124, Q50432892, Q4777701, Q50432906, Q73903833, Q96698882, Q27722633, Q15756626, Q50426542, Q15756812, Q96731253, Q27716109, Q28674084, Q30765655, Q15750599, Q50434863, Q27963511, Q27722249, Q26438883, Q96702805, Q9138991, Q50434822, Q15763968, Q15746413, Q15751392, Q27715762, Q15760254, Q15764884, Q50434812, Q50434806, Q65947267, Q15755022, Q15751672, Q15749624, Q15751671, Q15754928, Q17421626, Q55760336, Q91569362, Q96699456, Q15763491, Q15757138, Q15754890, Q29439056, Q15753565, Q88536414, Q15755345, Q3428625, Q63991660, Q12079299, Q15764191, Q102290752, Q96700155, Q96328366, Q27722314, Q50434867, Q15762598, Q96734674, Q4067169, Q27721518, Q9311494, Q27716601, Q98526206, Q96701961, Q27722313, Q96702841, Q50435001, Q50434998, Q50434997, Q60686370, Q96701598, Q50434983, Q50434980, Q12009773, Q96704666, Q50434977, Q96708998, Q119269544, Q120769273, Q4850220, Q96325750, Q56869084, Q96695425, Q50478544, Q96738165, Q126337131, Q27715745, Q15745236, Q26305317, Q31185385, Q50403023, Q27715578, Q96707822, Q28674093, Q73896629, Q27716269, Q96730421, Q13090965, Q56878058, Q27721630, Q96721380, Q105712889, Q50478579, Q50481547, Q50481538, Q50481537, Q3026028, Q96721219, Q27723088, Q96697616, Q50497476, Q96702349, Q15764790, Q7628069, Q11379546, Q11776816, Q50497424, Q28363416, Q15765360, Q50497420, Q96328604, Q50497620, Q15817570, Q4943578, Q27716178, Q96734130, Q15752692, Q50497832, Q15750602, Q15753564, Q15761074, Q96464019, Q51879325, Q15752920, Q15764647, Q96730261, Q65929183, Q50497898, Q65929200, Q15761473, Q96725887, Q21057404, Q15759118, Q15760251, Q15754200, Q50498055, Q28045170, Q15752793, Q15757315, Q96705943, Q29155972, Q55810461, Q96326047, Q50497996, Q15750435, Q96733029, Q9332699, Q27721517, Q15758041, Q20181769, Q96706593, Q50814309, Q130241045, Q31192661, Q15762585, Q15753311, Q15755175, Q15764348, Q96733919, Q15750865, Q27715504, Q96333963, Q7012392, Q96702782, Q96696267, Q50515506, Q27722615, Q15765731, Q96732664, Q96705686, Q50515809, Q112679466, Q27722248, Q96725760, Q96698326, Q50516616, Q96699556, Q96702542, Q15752339, Q28807408, Q15817775, Q28673901, Q96707410, Q50516912, Q50516908, Q124247899, Q62083846, Q50516842, Q96699259, Q55344392, Q50516972, Q50518217, Q96709141, Q2258877, Q50518133, Q1655827, Q15762519, Q96701468, Q50520781, Q89589356, Q186065, Q15759472, Q2844846, Q9148687, Q124350693, Q25415648, Q11828478, Q15758990, Q10669319, Q50520846, Q127162107, Q111345384, Q50521435, Q15753571, Q126279964, Q96737334, Q79009919, Q52158487, Q96698140, Q73903826, Q96730417, Q50534450, Q3592588, Q96723413, Q15762500, Q96329083, Q63292058, Q63171041, Q96333938, Q96706432, Q50552555, Q50552553, Q96724024, Q50552668, Q96732405, Q96709152, Q50552749, Q16610651, Q50552832, Q130545602, Q50553208, Q104456413, Q3552211, Q50553164, Q50553149, Q96708986, Q50557927, Q99066908, Q23889071, Q15752899, Q15761824, Q96730135, Q24525433, Q96732891, Q96333985, Q96733064, Q5533459, Q4807726, Q50668190, Q96328934, Q96730180, Q124351504, Q50808154, Q50808226, Q96735012, Q96698175, Q50668754, Q50808209, Q96329916, Q96327894, Q50808237, Q50808304, Q1550212, Q28446771, Q96703799, Q50808362, Q96732382, Q96731861, Q96705329, Q96721782, Q73903874, Q96733136, Q11747893, Q96717717, Q28671811, Q24525533, Q96733794, Q48842513, Q17619372, Q124423912, Q96732194, Q50810775, Q50807174, Q50810884, Q96723731, Q96736881, Q50810943, Q73908768, Q20529522, Q50811059, Q50811044, Q50811023, Q50811086, Q627517, Q2967475, Q50811201, Q96326012, Q50811184, Q50811181, Q50811171, Q28673263, Q124249302, Q96724391, Q50811314, Q96734664, Q50811402, Q96330434, Q50811453, Q50811444, Q96726392, Q96726383, Q96703446, Q96704031, Q85097495, Q50811612, Q96721422, Q50811783, Q50811771, Q96327352, Q96737342, Q96736758, Q96737335, Q115284156, Q96327728, Q96729561, Q96731245, Q12163682, Q96731495, Q96735393, Q50812178, Q73908428, Q96700463, Q96733804, Q96733005, Q96702967, Q50812357, Q96733073, Q50812348, Q108122042, Q50812390, Q96735325, Q96725889, Q96724410, Q96735816, Q96708730, Q96734604, Q96724132, Q96700365, Q96723775, Q74435473, Q96707526, Q96736900, Q96737350, Q96737088, Q50812498, Q96724354, Q50812583, Q96732487, Q96721247, Q96730109, Q96727568, Q123024238, Q33310486, Q124375805, Q28343468, Q96719437, Q135927579, Q96706569, Q96713041, Q96712800, Q96737907, Q96717912, Q96700067, Q135430596, Q96729954, Q109381818, Q135430784, Q135430823, Q116187787, Q96726555, Q96701382, Q111218992, Q96706554, Q96734110, Q135430539, Q111541958, Q135430967, Q117359297, Q135430847, Q96695810, Q50816349, Q50815648, Q28779741, Q96701295, Q96701388, Q65947129, Q28807311, Q96719415, Q6044456, Q50553172, Q116187778, Q50816155, Q50817329, Q96704186, Q96704340, Q7714670, Q2868640, Q50816943, Q96705752, Q96705756, Q96706350, Q5637151, Q88351667, Q50815075, Q96698964, Q135927414, Q124214057, Q96699525, Q50817933, Q20107834, Q68825609, Q27726989, Q50817893, Q50431732, Q27727579, Q50814621, Q134971256, Q50497955, Q96703790, Q50817640, Q50811119, Q116187798, Q96704849, Q50815176, Q96705783, Q130266048, Q50817989, Q96723638, Q50814370, Q50814474, Q50814602, Q50814389, Q50816150, Q50817054, Q116187796, Q3045694, Q27715768, Q50816375, Q50816773, Q50816377, Q3592634, Q64507619, Q3060776, Q96701080, Q96701155, Q106367438, Q96327778, Q101247086, Q73896646, Q96702532, Q96702562, Q116599850, Q15765011, Q3100810, Q96736500, Q50817623, Q27715871, Q50810738, Q96706409, Q50816296, Q96706435, Q135336822, Q54131776, Q104313374, Q50816302, Q50816510, Q50504637, Q50816131, Q101246290, Q5774576, Q96706548, Q50817232, Q96706805, Q50806959, Q50817782, Q28340499, Q50761446, Q9098860, Q50816161, Q15749606, Q50815442, Q104246110, Q15759407, Q50814387, Q27716483, Q131332318, Q50817155, Q96715625, Q15716320, Q15746649, Q50816505, Q50810476, Q27724978, Q96726223, Q50817545, Q50814591, Q96721378, Q25436122, Q50534447, Q20547152, Q50552740, Q15759112, Q28603621, Q50816424, Q50817555, Q23006303, Q96725883, Q50808312, Q96331398, Q50817544, Q1888231, Q96728077, Q50817516, Q50814503, Q50817468, Q106259434, Q96724206, Q50814383, Q124098705, Q107682727, Q50817212, Q96719884, Q3346085, Q124335808, Q96721036, Q96722994, Q50814771, Q50481548, Q50817677, Q50814689, Q50807248, Q116885635, Q50815179, Q50814530, Q96719047, Q15763855, Q50815639, Q96719473, Q50815766, Q50817901, Q15755314, Q50816368, Q134971248, Q50816324, Q96722659, Q50814449, Q50811213, Q50814702, Q50817607, Q96725761, Q116187803, Q50814354, Q50817339, Q50814985, Q50817512, Q50816469, Q111969431, Q50817579, Q114732262, Q9312720, Q96726155, Q49638096, Q28868226, Q117359308, Q50815235, Q27710107, Q135984874, Q50816374, Q50814767, Q50816454, Q7570482, Q50534379, Q15749627, Q50816694, Q96733126, Q96733181, Q50815215, Q59468117, Q50814837, Q96734470, Q50815770, Q50814991, Q63883093, Q50557924, Q53625119, Q50817399, Q96737788, Q96737789, Q50817189, Q15758351, Q50816338, Q50817015, Q96738229, Q50817955, Q50815556, Q34606812, Q27996900, Q96734070, Q50817854, Q50557923, Q99415734, Q116687086, Q132776853, Q125613294, ';
		}

	function loadJCRData() {
            document.getElementById('qidInput').value = 'Q9138986, Q2403870, Q2403870, Q15709999, Q4741520, Q389936, Q15749777, Q282682, Q2850699, Q635641, Q4787264, Q4824101, Q4824354, Q2503342, Q4970183, Q4996846, Q15764557, Q15765276, Q1032140, Q15762035, Q15762035, Q7721734, Q1053506, Q5061045, Q57584928, Q20081140, Q15762783, Q5155627, Q15767598, Q7731520, Q7731520, Q1716917, Q5404381, Q5421342, Q4162197, Q5501784, Q15759880, Q15759587, Q15759585, Q15750595, Q1608596, Q6005495, Q7739760, Q15746130, Q315571, Q1620986, Q5774576, Q15716415, Q15751367, Q15752233, Q5866179, Q3138561, Q6020249, Q15764294, Q15801092, Q15757850, Q689414, Q3186886, Q7743549, Q15707062, Q15754164, Q6294876, Q24338, Q7743575, Q7743576, Q7743576, Q6295386, Q2918516, Q15765638, Q6295853, Q6295929, Q15755506, Q15755502, Q2167315, Q15710008, Q15753668, Q15755920, Q27716149, Q6467172, Q6467172, Q15766008, Q3293267, Q15762873, Q15762868, Q15817918, Q6904208, Q3224839, Q7753584, Q15757677, Q15757668, Q3944882, Q1689370, Q15758107, Q7122492, Q7122588, Q15752695, Q15733002, Q1541522, Q7163760, Q15709983, Q3669366, Q7186165, Q1739521, Q84563357, Q6107109, Q15755235, Q3428676, Q1293231, Q3428649, Q16672690, Q3428740, Q2155659, Q7062588, Q2740960, Q7061723, Q15759569, Q7762641, Q15761362, Q15760677, Q15767253, Q2031994, Q7692591, Q15759340, Q15760366, Q6041301, Q1263938, Q7981920, Q15764382, Q2415267, Q186678, Q15751048, Q15746549, Q15761063, Q15755835, Q7318402, Q3428655, Q15749144, Q4787029, Q15758334, Q918039, Q5676459, Q15755969, Q15817789, Q15766535, Q15767281, Q2211319, Q7703209, Q186636, Q15753367, Q15757227, Q6979813, Q15758090, Q15757290, Q27715709, Q4821243, Q6296028, Q6296028, Q130345044, Q15753561, Q27722250, Q50432848, Q27721633, Q27715124, Q4777701, Q73903833, Q27722633, Q50426542, Q50426567, Q57315347, Q15749639, Q3607891, Q15793430, Q15753526, Q3486571, Q15756793, Q15716472, Q4689758, Q7550788, Q7550788, Q15757670, Q15766738, Q15761462, Q15755690, Q1142292, Q15746137, Q15766572, Q15766318, Q3416479, Q4744221, Q15765260, Q6094746, Q4915053, Q15746414, Q1317529, Q1317529, Q26849536, Q15750599, Q96724694, Q27963511, Q16456679, Q96329111, Q15746413, Q15751449, Q15760254, Q15764884, Q27919724, Q15759353, Q4302890, Q15755314, Q15816710, Q15816710, Q15755022, Q15751672, Q15749624, Q20013148, Q15750588, Q15757138, Q15754890, Q65929194, Q15753565, Q96702618, Q96327568, Q186038, Q15761101, Q15761959, Q15761363, Q4787299, Q15763833, Q7138992, Q5412665, Q15760922, Q15765050, Q15765050, Q5165411, Q15760907, Q5501783, Q7550648, Q15754284, Q15752392, Q7758693, Q6296132, Q15709994, Q15755753, Q15761995, Q3926551, Q112625289, Q15765436, Q15767048, Q15766239, Q7550865, Q15813937, Q15762332, Q4041305, Q4041305, Q4041305, Q15764168, Q15750619, Q5317268, Q6295754, Q4668339, Q3330664, Q15710144, Q15763693, Q15749659, Q50817015, Q27722313, Q50435001, Q60686370, Q15757849, Q15760446, Q186809, Q1409380, Q2523717, Q29312487, Q15751723, Q96325750, Q12640938, Q15716311, Q6051286, Q6295197, Q6295197, Q4652083, Q1385493, Q6020500, Q27715745, Q635850, Q15764290, Q27716613, Q96328721, Q15752991, Q2850663, Q26305317, Q15759280, Q96704037, Q96701388, Q15761039, Q124150526, Q12645928, Q6467369, Q15762913, Q15764347, Q5773182, Q56878058, Q50481538, Q50814348, Q5773935, Q15764581, Q7743593, Q15707101, Q7320444, Q15757834, Q15756856, Q15756856, Q6825992, Q15751370, Q15767254, Q15753021, Q9369161, Q9385804, Q4397976, Q28363416, Q15765360, Q96328604, Q15754229, Q6495229, Q2141147, Q15734636, Q3810630, Q15765221, Q15708638, Q27716371, Q15755445, Q5774620, Q5773941, Q15752391, Q15760776, Q15760776, Q6807053, Q15716422, Q15766737, Q15710147, Q15710147, Q5530932, Q15765357, Q15754934, Q15757288, Q5866090, Q4783420, Q15745485, Q5164979, Q15766888, Q15765973, Q27716483, Q7257650, Q15754937, Q15766927, Q6296154, Q15746646, Q15752249, Q2679814, Q7968612, Q5449598, Q15751912, Q59240072, Q15751408, Q96734130, Q15716534, Q60686393, Q7927222, Q15761696, Q15754162, Q15754002, Q3186955, Q1709879, Q6296065, Q96328684, Q7311124, Q15765029, Q15765029, Q18208366, Q5970293, Q15764213, Q15758204, Q15750978, Q15750870, Q5160117, Q15707782, Q15761364, Q27436709, Q15757174, Q15767557, Q15749790, Q7241027, Q5866092, Q4942937, Q96332358, Q102467345, Q65618887, Q27721632, Q15757877, Q15750602, Q15752920, Q15752920, Q15764647, Q4777706, Q15759626, Q22341243, Q27722617, Q15755231, Q15761473, Q21057404, Q15760251, Q15759589, Q50498055, Q28045170, Q15750600, Q96704102, Q1866122, Q15764235, Q50497996, Q27715122, Q5474571, Q2933146, Q13416949, Q15750593, Q96733855, Q96328683, Q54666380, Q15762585, Q15760414, Q15755175, Q15750865, Q96324458, Q15814228, Q15761724, Q6571575, Q15753276, Q15755166, Q6979868, Q15763447, Q6296039, Q15709942, Q15766763, Q5774776, Q15754673, Q15759439, Q15763635, Q15816524, Q15754205, Q15760000, Q15765014, Q15752357, Q50814395, Q96725244, Q96708993, Q27722715, Q96696267, Q15765731, Q12358496, Q96334631, Q27722714, Q15761467, Q5690744, Q15765224, Q15751353, Q7256326, Q7256326, Q15752888, Q15767497, Q15746686, Q5380365, Q15767088, Q7782240, Q15754888, Q5774685, Q15752880, Q68825609, Q15758309, Q50516908, Q136001602, Q56886923, Q6294981, Q15751878, Q6438568, Q7743638, Q29043990, Q15709997, Q15757428, Q4914970, Q15766497, Q57584772, Q15760250, Q50518146, Q96704532, Q50518125, Q15762519, Q15751493, Q15762576, Q15760830, Q50520781, Q12159072, Q4041570, Q15765711, Q50520948, Q15758990, Q50520846, Q104422107, Q27726840, Q15756051, Q135336822, Q52158487, Q15766734, Q15758351, Q102444512, Q96730350, Q15767415, Q6746655, Q6746655, Q15766818, Q15709992, Q15760916, Q15760916, Q15759763, Q6815693, Q4689782, Q15814341, Q15752990, Q42944714, Q15764726, Q50534447, Q50534626, Q15762500, Q27723764, Q5165794, Q50814689, Q96334795, Q50552749, Q96706596, Q50553172, Q96332726, Q5134329, Q5134329, Q28160598, Q27715768, Q15761291, Q53952822, Q60847859, Q26842884, Q15750538, Q56887191, Q56293427, Q27727561, Q15752899, Q50667848, Q50667855, Q27722629, Q4807726, Q27724034, Q15817845, Q5773969, Q28807213, Q96719085, Q28170943, Q2933121, Q2928074, Q96330047, Q15765011, Q96328934, Q102828056, Q96326422, Q54131776, Q50815008, Q50815001, Q124072301, Q50403241, Q28056981, Q50815075, Q50815068, Q50808226, Q96698175, Q96698175, Q96732558, Q50668754, Q50815106, Q96327894, Q50808237, Q50808316, Q50808304, Q50815179, Q4970991, Q96332244, Q96334566, Q47545087, Q63871626, Q63871834, Q55658698, Q96706060, Q20807896, Q50808401, Q15752232, Q96325758, Q15710018, Q50810738, Q55174712, Q53966481, Q27725364, Q7225159, Q50815695, Q6030640, Q6030640, Q4033164, Q50815648, Q27727675, Q96706523, Q50815770, Q135984984, Q27723588, Q50810810, Q1935026, Q96713646, Q50816131, Q63092347, Q96733089, Q50807174, Q96734872, Q96324944, Q50810950, Q50816338, Q50811059, Q50816302, Q96333505, Q15734620, Q50816374, Q50811119, Q50816469, Q27996900, Q50811213, Q96327607, Q50811402, Q50811394, Q50811444, Q96726383, Q96702756, Q96706409, Q54941028, Q96711065, Q56649017, Q24911218, Q84309632, Q50817151, Q63871645, Q28340499, Q28340499, Q96326051, Q88966995, Q73908428, Q50817544, Q50812357, Q96710831, Q96324577, Q96701646, Q96735816, Q102828874, Q96706130, Q96700527, Q96700639, Q96727357, Q3560263, Q50810888, Q96706351, Q135741819, Q127599661, Q5618698, Q101246290, Q101246290, Q603149, Q96707953, Q15759407, Q50431709, Q27727205, Q50425207, Q50425207, Q96334187, ';
		}

    function parseQIDs(input) {
        return input
            .split(/[\s,\n\r]+/)
            .map(qid => qid.trim().toUpperCase())
            .filter(qid => qid.match(/^Q\d+$/))
            .filter((qid, index, self) => self.indexOf(qid) === index);
    }

    async function fetchEntities(qids) {
        const qidString = qids.join('|');
        const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${qidString}&format=json&origin=*&languages=en&props=labels|claims`;
        
        const response = await fetch(url);
        const data = await response.json();
        
        if (!data.entities) throw new Error('R√©ponse invalide de la part de l\'API de Wikidata');

        const entities = [];
        for (const [qid, entity] of Object.entries(data.entities)) {
            if (entity.missing) continue;

            const processedEntity = {
                qid: qid,
                label: entity.labels?.en?.value || qid,
                website: extractWebsite(entity.claims),
                subjects: await extractSubjects(entity.claims)
            };

            entities.push(processedEntity);
        }

        return entities;
    }

    function extractWebsite(claims) {
        if (!claims || !claims.P856) return null;
        const websiteClaim = claims.P856[0];
        return websiteClaim.mainsnak?.datavalue?.value || null;
    }

    async function extractSubjects(claims) {
        if (!claims || !claims.P921) return [];

        const subjectIds = claims.P921
            .map(claim => claim.mainsnak?.datavalue?.value?.id)
            .filter(Boolean);

        if (subjectIds.length === 0) return [];

        const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${subjectIds.join('|')}&format=json&origin=*&languages=en&props=labels`;
        const response = await fetch(url);
        const data = await response.json();

        return subjectIds.map(id => ({
            id,
            label: data.entities[id]?.labels?.en?.value || id
        }));
    }

    function countSubjects() {
        subjectCounts.clear();
        allEntities.forEach(entity => {
            entity.subjects.forEach(subject => {
                if (allowedSubjects.has(subject.id)) {
                    if (!subjectCounts.has(subject.id)) {
                        subjectCounts.set(subject.id, { label: subject.label, count: 0 });
                    }
                    subjectCounts.get(subject.id).count++;
                }
            });
        });
    }

    function displayFilterButtons() {
        const container = document.getElementById('filterButtons');
        container.innerHTML = '';

        const sortedSubjects = Array.from(subjectCounts.entries())
            .sort((a, b) => b[1].count - a[1].count || a[1].label.localeCompare(b[1].label));

        sortedSubjects.forEach(([id, data]) => {
            const button = document.createElement('button');
            button.className = 'filter-btn';
            button.onclick = () => toggleFilter(id);
            button.setAttribute("data-id", id);
            button.innerHTML = `<span>${data.label}</span><span class="filter-count">${data.count}</span>`;
            container.appendChild(button);
        });

        if (sortedSubjects.length > 0) {
            document.getElementById('filterSection').classList.add('show');
        }
    }

    function toggleFilter(subjectId) {
        if (activeFilters.has(subjectId)) {
            activeFilters.delete(subjectId);
        } else {
            activeFilters.add(subjectId);
        }
        updateFilterButtons();
        applyFilters();
        displayResults();
    }

    function updateFilterButtons() {
        const buttons = document.querySelectorAll('.filter-btn');
        buttons.forEach(button => {
            const subjectId = button.getAttribute("data-id");
            button.classList.toggle('active', activeFilters.has(subjectId));
        });
    }

    function clearAllFilters() {
        activeFilters.clear();
        updateFilterButtons();
        applyFilters();
        displayResults();
    }

    function applyFilters() {
        if (activeFilters.size === 0) {
            filteredEntities = [...allEntities];
        } else {
            filteredEntities = allEntities.filter(entity => {
                return Array.from(activeFilters).every(filterId => 
                    entity.subjects.some(s => s.id === filterId)
                );
            });
        }
    }

    function displayResults() {
        const tbody = document.getElementById('resultsTableBody');
        tbody.innerHTML = '';

        filteredEntities.forEach(entity => {
            const row = document.createElement('tr');

            const websiteCell = entity.website 
                ? `<a href="${entity.website}" target="_blank" class="qid-link">Site web</a>`
                : '<span class="no-data">No website</span>';

            const subjectsCell = entity.subjects.length > 0
				? `<div class="subject-tags">${
					entity.subjects
					  .filter(s => !["Q1066186",    // remove study of history
					                 "Q309",        // remove history
									 ].includes(s.id)) // remove unwanted QIDs for better readability of the table 
					  .map(s => `<span class="subject-tag">${s.label}</span>`)
					  .join('')
				  }</div>`
				: '<span class="no-data">No subjects</span>';


            row.innerHTML = `
                <td><a href="https://www.wikidata.org/wiki/${entity.qid}" target="_blank" class="qid-link">${entity.qid}</a></td>
                <td><strong>${entity.label}</strong></td>
                <td><small>${websiteCell} + <a href="https://umontreal.on.worldcat.org/search?queryString=ti:(${entity.label})&format=Jrnl&subformat=Jrnl::jrnl_digital&changedFacet=format" target="_blank" class="qid-link">Rech. Sofia UdeM</a><small></td>
                <td>${subjectsCell}</td>
            `;
            
            tbody.appendChild(row);
        });

        const activeFiltersText = activeFilters.size > 0 
            ? ` (filtered by: ${Array.from(activeFilters).join(', ')})` 
            : '';
        document.getElementById('resultsCount').textContent = 
            `Affiche ${filteredEntities.length} de ${allEntities.length} entit√©s${activeFiltersText}`;
    }

    function showLoading(show) {
        document.getElementById('loading').classList.toggle('show', show);
    }

    function showError(message) {
        const error = document.getElementById('error');
        error.textContent = message;
        error.classList.add('show');
    }

    function hideError() {
        document.getElementById('error').classList.remove('show');
    }

    function showResults() {
        document.getElementById('resultsSection').classList.add('show');
    }

    function hideResults() {
        document.getElementById('resultsSection').classList.remove('show');
        document.getElementById('filterSection').classList.remove('show');
    }
</script>

</body>
</html>
