<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revues utiles à la recherche en histoire à l’UdeM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .qid-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: monospace;
            resize: vertical;
            outline: none;
            transition: all 0.3s ease;
        }

        .qid-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-help {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .process-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .process-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .process-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            color: #667eea;
            font-size: 18px;
            margin: 20px 0;
            display: none;
        }

        .loading.show {
            display: block;
        }

        .error {
            background: #ffe6e6;
            color: #d63031;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #d63031;
            display: none;
        }

        .error.show {
            display: block;
        }

        .filter-section {
            margin: 30px 0;
            display: none;
        }

        .filter-section.show {
            display: block;
        }

        .filter-title {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clear-filters-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .clear-filters-btn:hover {
            background: #ff5252;
            transform: translateY(-1px);
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .filter-btn {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn:hover {
            background: #f0f4ff;
            transform: translateY(-1px);
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .filter-count {
            background: rgba(255, 255, 255, 0.3);
            padding: 2px 2px;
            border-radius: 8px;
            font-size: 8px;
            font-weight: bold;
        }

        .filter-btn.active .filter-count {
            background: rgba(255, 255, 255, 0.2);
        }

        .demo-section {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .demo-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .demo-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .demo-btn:hover {
            background: #5a6fd8;
        }
		
        .results-section {
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .results-count {
            color: #666;
            font-size: 16px;
        }

        .export-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .results-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #f0f0f0;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            vertical-align: top;
        }

        tr:hover {
            background: #f8f9ff;
        }

        .qid-link {
            color: #667eea;
            text-decoration: none;
            font-family: monospace;
            font-weight: bold;
        }

        .qid-link:hover {
            text-decoration: underline;
        }

        .website-link {
            color: #28a745;
            text-decoration: none;
            font-weight: 500;
        }

        .website-link:hover {
            text-decoration: underline;
        }

        .subject-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .subject-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            border: 1px solid #e0e8ff;
        }

        .no-data {
            color: #999;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .filter-buttons {
                gap: 8px;
            }
            
            .filter-btn {
                padding: 8px 15px;
                font-size: 13px;
            }
            
            th, td {
                padding: 10px 8px;
                font-size: 14px;
            }
            
            .results-header {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Revues utiles à la recherche en histoire à l’UdeM</h1>
        <p>
        Cette liste inclut des titres spécialisés en histoire et des titres multidisciplinaires (revues savantes et revues d’intérêt général). Les données sont automatiquement extraites de Wikidata en temps réel et elles peuvent donc contenir des lacunes ou des erreurs. Vous êtes chaleureusement invités à contribuer à Wikidata pour améliorer ces données (contacter votre <a href="https://boite-outils.bib.umontreal.ca/etudes-religieuses-histoire-philosophie/histoire">bibliothécaire en histoire</a> qui se fera un plaisir de vous guider). En <a href="faq.html">savoir plus</a>.
        </p>
        <p>Chercheuses et chercheurs UdeM : L’accès depuis l’extérieur du campus à la plupart des revues en version électronique nécessite la configuration du <a href="https://studio.bib.umontreal.ca/informatique/proxy/">proxy</a>. Les bibliothèques/UdeM n’ont pas nécessairement un abonnement courant ou un accès aux archives complètes des revues listées ci-dessous. Si l’article voulu n’est pas disponible dans les abonnements UdeM, faites une demande de <a href="https://bib.umontreal.ca/obtenir/peb/">prêt entre bibliothèques</a>. Article disponible en papier seulement ? Faites une <a href="https://bib.umontreal.ca/obtenir/numerisation"> demande de numérisation</a>.
        </p>
        <div class="demo-section">
            <h3>📋 Charger les données automatiquement depuis :</h3>
            <button class="demo-btn" onclick="loadDemoData()">Liste du bibliothécaire (370+)</button>
            <button class="demo-btn" onclick="loadLargeDemoData()">Liste 'histoire' du DOAJ (1800+)</button>
        </div>

        <div class="input-section">
            <h3>📝 Saisir les QIDs des revues à afficher:</h3>
            <textarea 
                class="qid-input" 
                id="qidInput" 
                placeholder="Saisir les QIDs séparés par des virgules, des espaces ou un par ligne."
            ></textarea>
            <div class="input-help">Saisir les QIDs séparés par des virgules, des espaces ou un par ligne.</div>
            <button class="process-btn" onclick="processQIDs()" id="processBtn">
                🚀 Traitement des QIDs
            </button>
        </div>

        <div class="loading" id="loading">🔄 Traitement des QIDs et extraction des données...</div>
        <div class="error" id="error"></div>

        <div class="filter-section" id="filterSection">
            <div class="filter-title">
                🏷️ Filtrer par sujet (P921)
                <button class="clear-filters-btn" onclick="clearAllFilters()">Réinitialiser</button>
            </div>
            <div class="filter-buttons" id="filterButtons"></div>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <div class="results-count" id="resultsCount"></div>
            <!--    <button class="export-btn" onclick="exportToCSV()">📊 Exporter en CSV</button>  -->
            </div>
            <div class="results-table">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>QID</th>
                                <th>Libellé</th>
                                <th>Site web officiel (P856)</th>
                                <th>Sujets (P921)</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
    let allEntities = [];
    let filteredEntities = [];
    let activeFilters = new Set();
    let subjectCounts = new Map();

    // ✅ Allowed QIDs for filters
    const allowedSubjects = new Set(["Q41493", "Q846742", "Q2945", "Q131110", "Q908604"]);

    async function processQIDs() {
        const input = document.getElementById('qidInput').value.trim();
        if (!input) {
            showError('Saisir au moins un QID.');
            return;
        }

        const qids = parseQIDs(input);
        if (qids.length === 0) {
            showError('Aucun QID valide repéré. Vérifier le format d\'importation.');
            return;
        }

        showLoading(true);
        hideError();
        hideResults();
        
        const processBtn = document.getElementById('processBtn');
        processBtn.disabled = true;

        try {
            allEntities = [];
            subjectCounts.clear();

            const batchSize = 50;
            for (let i = 0; i < qids.length; i += batchSize) {
                const batch = qids.slice(i, i + batchSize);
                const batchEntities = await fetchEntities(batch);
                allEntities = allEntities.concat(batchEntities);
            }

            if (allEntities.length === 0) {
                showError('Pas d\'entité valide repérée pour les QIDs soumis.');
                return;
            }

            countSubjects();
            filteredEntities = [...allEntities];
            activeFilters.clear();

            displayFilterButtons();
            displayResults();
            showResults();

        } catch (error) {
            console.error('Erreur lors du traitement des QIDs:', error);
            showError('Erreur lors du traitement des QIDs. Merci de relancer.');
        } finally {
            showLoading(false);
            processBtn.disabled = false;
        }
    }

    function loadDemoData() {
        document.getElementById('qidInput').value = 'Q96696272, Q27715829, Q81661038, Q1533284, Q15761069, Q15734637, Q1526607, Q3137027, Q15750588, Q15710144, Q50811044, Q15758694, Q106490184, Q15801092, Q689414, Q6094746, Q63871834, Q15755664, Q1709853, Q6295426, Q15765711, Q3195472, Q616020, Q6467369, Q1877757, Q15753276, Q96716175, Q15275990, Q3346085, Q3346085, Q15762524, Q15761409, Q3409088, Q15754916, Q3428644, Q3428655, Q15814307, Q135989810, Q15766804, Q15757288, Q15757664, Q15757664, Q2261617, Q21031268, Q7575349, Q15752327, Q3517743, Q4744238, Q15749777, Q15762044, Q6020500, Q135989947, Q1742895, Q1809405, Q1004380, Q100791855, Q1032140, Q1053506, Q12005743, Q1205540, Q1217470, Q12645928, Q1268287, Q13375921, Q135792875, Q1399128, Q1541522, Q15707062, Q15707255, Q15707591, Q15708751, Q15708755, Q15709942, Q15709997, Q15709999, Q15710019, Q15716415, Q15716472, Q15724318, Q15745485, Q15746414, Q15749144, Q15749180, Q15749508, Q15749776, Q15749884, Q15750390, Q15750595, Q15750597, Q15750599, Q15750824, Q15751048, Q15751064, Q15751367, Q15751404, Q15751912, Q15751915, Q15751916, Q15751919, Q15752249, Q15752254, Q15752619, Q15752880, Q15752909, Q15753021, Q15753940, Q15753969, Q15754164, Q15754166, Q15754205, Q15754233, Q15754660, Q15754673, Q15754782, Q15754934, Q15754937, Q15755088, Q15755506, Q15755698, Q15755753, Q15755838, Q15755884, Q15755967, Q15756341, Q15756768, Q15756856, Q15757227, Q15757370, Q15757374, Q15757440, Q15757849, Q15757850, Q15758055, Q15758309, Q15758315, Q15758334, Q15758545, Q15758695, Q15758956, Q15759472, Q15759585, Q15759681, Q15759835, Q15759935, Q15760379, Q15760438, Q15760613, Q15760677, Q15760776, Q15760865, Q15760922, Q15761039, Q15761095, Q15761399, Q15761462, Q15761629, Q15761724, Q15762030, Q15762035, Q15762062, Q15762500, Q15762913, Q15763495, Q15764205, Q15764347, Q15764382, Q15765029, Q15765325, Q15765353, Q15765436, Q15765973, Q15766034, Q15766075, Q15766082, Q15766240, Q15766318, Q15766738, Q15767254, Q15767415, Q15767557, Q15767598, Q15767675, Q1579604, Q15814375, Q15817137, Q15817925, Q1608596, Q1679951, Q1709867, Q1709879, Q1710787, Q1716917, Q1783145, Q1810221, Q186717, Q1941227, Q19851135, Q20081140, Q21020985, Q2166804, Q22811529, Q2366889, Q23759748, Q2403870, Q2415267, Q24238738, Q2503342, Q26849526, Q26849617, Q27715641, Q27715679, Q27715859, Q27715919, Q27716594, Q27719001, Q27719037, Q27722635, Q27921636, Q2810781, Q2823586, Q282477, Q2844846, Q2845020, Q2850663, Q2850699, Q2860195, Q28603621, Q29043990, Q29059279, Q2918516, Q2928051, Q2928071, Q2933107, Q2933112, Q2933113, Q2933118, Q2933121, Q2933128, Q2933146, Q2979361, Q3026028, Q3098897, Q3100810, Q3136533, Q3136538, Q3186955, Q3224839, Q3276833, Q3313811, Q3332702, Q3416479, Q3421962, Q3421969, Q3421978, Q3421979, Q3424061, Q3428620, Q3428642, Q3428645, Q3428647, Q3428649, Q3428676, Q3428686, Q3428697, Q3560263, Q3586209, Q3592587, Q389936, Q3926551, Q42020894, Q4391074, Q4652083, Q465332, Q4668339, Q4689758, Q471378, Q4744109, Q4744221, Q4744251, Q47456350, Q47518673, Q4763427, Q4775205, Q4806750, Q4824354, Q4996846, Q50520948, Q50534447, Q5061045, Q50808285, Q50814520, Q50815451, Q50815455, Q50816573, Q5128255, Q5134329, Q5155627, Q5164979, Q5349065, Q53952813, Q53953010, Q53966481, Q53967759, Q5404381, Q5412665, Q5421342, Q5449598, Q5501783, Q5501784, Q55174624, Q5530932, Q55397544, Q5618698, Q5676459, Q56825794, Q56825810, Q56825923, Q57064282, Q57244325, Q57274302, Q5773941, Q5774620, Q5774685, Q5774776, Q58214283, Q58335332, Q5937513, Q6294759, Q6294876, Q6294983, Q6295197, Q6295549, Q6295853, Q6295929, Q6295955, Q6296028, Q6296147, Q635611, Q635850, Q63871836, Q6467152, Q6495229, Q6496242, Q6553313, Q66115552, Q6815693, Q6888570, Q6888582, Q6979868, Q7278875, Q7318402, Q7550788, Q7628021, Q7721734, Q7722548, Q7731520, Q7739760, Q7739760, Q7743549, Q7743575, Q7743576, Q7753584, Q81849192, Q856645, Q88349845, Q88977165, Q94153204, Q96321132, Q96699572, Q96700952, Q96701593, Q96702190, Q96725331, Q9182836, Q1277520, Q3365487';
    }
	
	function loadLargeDemoData() {
            document.getElementById('qidInput').value = 'Q99066908, Q97727193, Q96738635, Q96738388, Q96738165, Q96737907, Q96736372, Q96736339, Q96735929, Q96735792, Q96734674, Q96734484, Q96734070, Q96734041, Q96733890, Q96733865, Q96733855, Q96733793, Q96733181, Q96733155, Q96733089, Q96732833, Q96732363, Q96732298, Q96732126, Q96731376, Q96731245, Q96730912, Q96730543, Q96730421, Q96730350, Q96730135, Q96729749, Q96727939, Q96727721, Q96727476, Q96727357, Q96727306, Q96726813, Q96726769, Q96726383, Q96726223, Q96725996, Q96725887, Q96725640, Q96725553, Q96725387, Q96725331, Q96725244, Q96724945, Q96724708, Q96724410, Q96723254, Q96722880, Q96722730, Q96722597, Q96722473, Q96721676, Q96721232, Q96721198, Q96721057, Q96720759, Q96720654, Q96720310, Q96719650, Q96719085, Q96718023, Q96717840, Q96717830, Q96717713, Q96717529, Q96717404, Q96716955, Q96716511, Q96716220, Q96716175, Q96714870, Q96713660, Q96713646, Q96713506, Q96713201, Q96712514, Q96711241, Q96710875, Q96710831, Q96710084, Q96709169, Q96709016, Q96708998, Q96708750, Q96708743, Q96708102, Q96707953, Q96707446, Q96707410, Q96706816, Q96706805, Q96706593, Q96706554, Q96706543, Q96706516, Q96706432, Q96706429, Q96706412, Q96706396, Q96706351, Q96706350, Q96706182, Q96706130, Q96705943, Q96705924, Q96705816, Q96705547, Q96705091, Q96704849, Q96704532, Q96704414, Q96704340, Q96704314, Q96704037, Q96704031, Q96703790, Q96703733, Q96703517, Q96703367, Q96703006, Q96702190, Q96701614, Q96701593, Q96701519, Q96701388, Q96700952, Q96700869, Q96700790, Q96700577, Q96700527, Q96700155, Q96699903, Q96699572, Q96699556, Q96699521, Q96698996, Q96698766, Q96698412, Q96698199, Q96698175, Q96697596, Q96697509, Q96697327, Q96696272, Q96696267, Q96695820, Q96695774, Q96695481, Q96335190, Q96335115, Q96335083, Q96334921, Q96334836, Q96334826, Q96334820, Q96334815, Q96334795, Q96334794, Q96334728, Q96334631, Q96334586, Q96334408, Q96334403, Q96334347, Q96334346, Q96334330, Q96334327, Q96334288, Q96334160, Q96334084, Q96334062, Q96334050, Q96334049, Q96334047, Q96334024, Q96334012, Q96334003, Q96333991, Q96333989, Q96333983, Q96333981, Q96333976, Q96333965, Q96333963, Q96333957, Q96333938, Q96333937, Q96333930, Q96333828, Q96333773, Q96333681, Q96333665, Q96333611, Q96333429, Q96332726, Q96332713, Q96332698, Q96332530, Q96332525, Q96332522, Q96332518, Q96332513, Q96332491, Q96332454, Q96332358, Q96332272, Q96332255, Q96332244, Q96332143, Q96332072, Q96331802, Q96331754, Q96331534, Q96331520, Q96331398, Q96331378, Q96331374, Q96331363, Q96331312, Q96331264, Q96331238, Q96331130, Q96331050, Q96331035, Q96330989, Q96330987, Q96330978, Q96330976, Q96330972, Q96330890, Q96330875, Q96330843, Q96330770, Q96330732, Q96330662, Q96330661, Q96330636, Q96330565, Q96330523, Q96330434, Q96330358, Q96330066, Q96330062, Q96330052, Q96330036, Q96330029, Q96330025, Q96329916, Q96329877, Q96329620, Q96329482, Q96329462, Q96329446, Q96329342, Q96329139, Q96329111, Q96329083, Q96329054, Q96329053, Q96328980, Q96328972, Q96328953, Q96328934, Q96328914, Q96328907, Q96328903, Q96328900, Q96328897, Q96328889, Q96328885, Q96328881, Q96328876, Q96328799, Q96328786, Q96328731, Q96328684, Q96328683, Q96328655, Q96328233, Q96328129, Q96328110, Q96328107, Q96328066, Q96328042, Q96327894, Q96327778, Q96327662, Q96327607, Q96327568, Q96327503, Q96327479, Q96327352, Q96327330, Q96327245, Q96327209, Q96327188, Q96326991, Q96326775, Q96326422, Q96326360, Q96326345, Q96326295, Q96326286, Q96326271, Q96326267, Q96326244, Q96326214, Q96326189, Q96326165, Q96326161, Q96326153, Q96326113, Q96326108, Q96326102, Q96326090, Q96326056, Q96326051, Q96326047, Q96326012, Q96325974, Q96325843, Q96325813, Q96325758, Q96325750, Q96325385, Q96325342, Q96325336, Q96325223, Q96325172, Q96325050, Q96324944, Q96324887, Q96324881, Q96324877, Q96324840, Q96324824, Q96324763, Q96324661, Q96324577, Q96324499, Q96324458, Q96321132, Q96320824, Q96320495, Q94153204, Q9386958, Q9369161, Q9347342, Q9338524, Q9338523, Q9334636, Q9182836, Q9182835, Q918039, Q91783667, Q91777694, Q91776627, Q91644408, Q91638718, Q9138991, Q9138986, Q9138967, Q9068473, Q89679692, Q89490561, Q88977207, Q88977165, Q88966995, Q88349845, Q871189, Q856667, Q856645, Q85097495, Q84588333, Q84563357, Q84309632, Q81849192, Q81661038, Q8047382, Q80452753, Q8026525, Q7987841, Q7981920, Q7968612, Q7928932, Q7927331, Q7923855, Q78352066, Q7783441, Q7764766, Q776367, Q7762641, Q7758693, Q7757649, Q7753584, Q7743638, Q7743576, Q7743575, Q7743549, Q7739760, Q7735257, Q7732615, Q7731520, Q7727851, Q772287, Q7722548, Q7721734, Q7714670, Q7703209, Q76998312, Q7692591, Q7628082, Q7628046, Q7628021, Q7628020, Q7578151, Q7575349, Q7550865, Q7550788, Q7550776, Q7550658, Q7500070, Q74435473, Q73908443, Q73908428, Q73551781, Q7318986, Q7318487, Q7318402, Q7278875, Q7268452, Q7257479, Q7238215, Q722773, Q7210240, Q7186103, Q7168869, Q7163760, Q7138992, Q7135216, Q7122588, Q7122492, Q7061723, Q7015460, Q7012392, Q7012075, Q6984368, Q6979868, Q6979813, Q69560504, Q6937141, Q689414, Q6889120, Q6888582, Q6888570, Q6841334, Q6825992, Q6816229, Q6815693, Q6807053, Q6786154, Q6746655, Q6730485, Q6705203, Q66115552, Q65947244, Q65929208, Q65929200, Q65929194, Q6571575, Q65618887, Q6553313, Q65152559, Q6507338, Q65048150, Q65041336, Q6496242, Q6496198, Q6495229, Q6467369, Q6467172, Q6467152, Q64507706, Q64507651, Q64507319, Q64372057, Q64352921, Q6431926, Q6431659, Q63993614, Q63991660, Q63928581, Q63871836, Q63871834, Q63871831, Q63871829, Q63871773, Q63871648, Q63871645, Q63871644, Q63871626, Q63871610, Q63871603, Q63871588, Q635850, Q635627, Q635611, Q63383062, Q63171041, Q63092347, Q6296211, Q6296188, Q6296147, Q6296132, Q6296065, Q6296041, Q6296028, Q6295955, Q6295929, Q6295920, Q6295913, Q6295898, Q6295892, Q6295853, Q6295754, Q6295735, Q6295549, Q6295547, Q6295426, Q6295386, Q6295251, Q6295197, Q6294983, Q6294981, Q6294950, Q6294876, Q6294803, Q6294764, Q6294759, Q6294738, Q6294705, Q62665589, Q62023802, Q6185190, Q616020, Q6107109, Q6094746, Q6087238, Q6087231, Q60861467, Q60847859, Q60686393, Q60686370, Q6067557, Q6067349, Q6051423, Q6051286, Q60420876, Q6041301, Q6035751, Q60330914, Q603149, Q6030640, Q6020500, Q6020249, Q60105390, Q60040607, Q5984884, Q59772450, Q59468117, Q59429348, Q59390808, Q5937513, Q59289096, Q5866179, Q5866092, Q58468284, Q58335332, Q58234452, Q58214283, Q58011226, Q5774776, Q5774685, Q5774620, Q5773941, Q5773182, Q576066, Q57584928, Q57584772, Q57315436, Q57315389, Q57315347, Q57274302, Q57244325, Q57205833, Q57064282, Q56887191, Q56886923, Q56878087, Q56878058, Q56825923, Q56825810, Q56825794, Q56823466, Q5676459, Q56696298, Q56338197, Q56317766, Q56317343, Q56317201, Q56293427, Q56254713, Q5618698, Q55810461, Q55760410, Q55760336, Q55760095, Q55658698, Q5551195, Q55397544, Q55397534, Q5530932, Q55174624, Q55174566, Q55086326, Q5501928, Q5501871, Q5501784, Q5501783, Q5501744, Q54941028, Q5449598, Q5448899, Q5421342, Q54131776, Q5412665, Q5412087, Q5404391, Q5404381, Q53967759, Q53966481, Q53953010, Q53952906, Q53952822, Q53952813, Q53952291, Q53918624, Q5382167, Q5380365, Q5349065, Q5338215, Q5326727, Q5323289, Q52990989, Q5279394, Q5238184, Q52196360, Q52160230, Q52158487, Q51999643, Q5195051, Q51845880, Q5165794, Q5165411, Q5164979, Q5155627, Q5134329, Q5128255, Q51122343, Q50817989, Q50817933, Q50817893, Q50817856, Q50817763, Q50817640, Q50817567, Q50817418, Q50817341, Q50817329, Q50817326, Q50817155, Q50817148, Q50817117, Q50816996, Q50816943, Q50816942, Q50816941, Q50816773, Q50816687, Q50816653, Q50816582, Q50816573, Q50816510, Q50816482, Q50816354, Q50816131, Q50815800, Q50815770, Q50815668, Q50815662, Q50815654, Q50815648, Q50815519, Q50815455, Q50815451, Q50815260, Q50815245, Q50815215, Q50815187, Q50815179, Q50815106, Q50815068, Q50815037, Q50814837, Q50814771, Q50814596, Q50814589, Q50814542, Q50814530, Q50814520, Q50814383, Q50814365, Q50814348, Q50814224, Q50812357, Q50812145, Q50812141, Q50811799, Q50811784, Q50811774, Q50811771, Q50811642, Q50811635, Q50811444, Q50811435, Q50811394, Q50811335, Q50811189, Q50811119, Q50811044, Q50810983, Q50810950, Q50810888, Q50810837, Q50810765, Q50810742, Q50810738, Q50810543, Q50808454, Q50808451, Q50808446, Q50808424, Q50808401, Q50808378, Q50808362, Q50808342, Q50808293, Q50808285, Q50808251, Q50808247, Q50808237, Q50808226, Q50808209, Q50807174, Q50807154, Q50807146, Q50806996, Q50806660, Q50667848, Q5061045, Q50557884, Q50553215, Q50553162, Q50552832, Q50552752, Q50552749, Q50534592, Q50534587, Q50534579, Q50534543, Q50534447, Q50534310, Q50521456, Q50521444, Q50520948, Q50520781, Q50518146, Q50518133, Q50518127, Q50518125, Q50518124, Q50516908, Q50515794, Q50504637, Q50498055, Q50497996, Q50497955, Q50497937, Q50497832, Q50497748, Q50497554, Q50497476, Q50497421, Q50481552, Q50481538, Q50478724, Q50478627, Q50478607, Q50478579, Q50434983, Q50434980, Q50434977, Q50434968, Q50434852, Q50434820, Q50434700, Q50432892, Q50432848, Q50432823, Q50432273, Q50431732, Q50426519, Q50426299, Q50425426, Q50425207, Q50403241, Q50403023, Q5035430, Q5030601, Q5030231, Q5017412, Q4996846, Q4984286, Q4970991, Q4970183, Q49638096, Q4949913, Q4943578, Q4942937, Q4914884, Q48842799, Q48814692, Q4846673, Q4836917, Q4824354, Q4821243, Q4807726, Q4806750, Q480577, Q4790506, Q4787315, Q4787299, Q4787289, Q4783420, Q4778488, Q4777706, Q4777701, Q4775205, Q4774857, Q4763668, Q4763427, Q47545087, Q47518673, Q4751657, Q4751015, Q47458802, Q47456350, Q4744777, Q4744472, Q4744365, Q4744251, Q4744238, Q4744221, Q4744109, Q4743492, Q4742995, Q4742458, Q4736262, Q471378, Q47012220, Q47010074, Q4689977, Q4689921, Q4689782, Q4689758, Q4672768, Q4668339, Q465332, Q4652083, Q4455439, Q44492240, Q44281020, Q4397976, Q4391074, Q43755801, Q43379078, Q42730556, Q42020894, Q4162197, Q4126417, Q4125003, Q4115333, Q4041570, Q4041305, Q4040686, Q4035788, Q4033164, Q3944882, Q3926551, Q389936, Q3885813, Q385919, Q3820793, Q3810630, Q3745516, Q36937339, Q3686729, Q3592587, Q3586209, Q3560263, Q35387261, Q3517743, Q3509007, Q3486571, Q3453515, Q3441121, Q3428740, Q3428701, Q3428699, Q3428697, Q3428695, Q3428686, Q3428676, Q3428659, Q3428655, Q3428649, Q3428647, Q3428645, Q3428644, Q3428642, Q3428632, Q3428620, Q3424061, Q3421979, Q3421978, Q3421969, Q3421962, Q3416479, Q3409088, Q3403445, Q3365487, Q3346085, Q3332702, Q3330664, Q3313811, Q3311651, Q3293267, Q3276833, Q3224839, Q32246, Q3224523, Q3195472, Q3186955, Q3186897, Q3186854, Q3186808, Q3137027, Q3136538, Q3136533, Q3100984, Q3100810, Q3098897, Q3076430, Q3060776, Q3026028, Q301654, Q29914116, Q2979361, Q2933146, Q2933134, Q2933128, Q2933121, Q2933118, Q2933113, Q2933112, Q2933107, Q2928071, Q2928051, Q2918516, Q2911917, Q29059279, Q29043990, Q29043967, Q29043867, Q29043794, Q2902198, Q28868226, Q28807437, Q28807311, Q28674098, Q28674093, Q28603621, Q2860195, Q2850699, Q2850663, Q2845020, Q2844846, Q28363416, Q282477, Q2823586, Q28160598, Q28119910, Q2811847, Q2810781, Q28045170, Q27996900, Q27966326, Q27963511, Q27927734, Q27921636, Q27727641, Q27726840, Q27726174, Q27725268, Q27724978, Q27724034, Q27723088, Q27722714, Q27722635, Q27722633, Q27722616, Q27722615, Q27722323, Q27722250, Q27722249, Q27721633, Q27721632, Q27721630, Q27721519, Q27719037, Q27719030, Q27719001, Q27718942, Q27718715, Q27718539, Q27716613, Q27716596, Q27716594, Q27716482, Q27716425, Q27716412, Q27716402, Q27716181, Q27716178, Q27716138, Q27716131, Q27716122, Q27716025, Q27715977, Q27715952, Q27715919, Q27715887, Q27715859, Q27715829, Q27715795, Q27715794, Q27715768, Q27715709, Q27715679, Q27715641, Q27715578, Q27715541, Q27715506, Q27715222, Q27714902, Q27436709, Q2740960, Q27063807, Q26849617, Q26849594, Q26849526, Q26849518, Q26438883, Q26319487, Q26305317, Q2563492, Q25570848, Q25436122, Q2503342, Q24914818, Q24911767, Q248774, Q24525533, Q24525511, Q24525482, Q24525433, Q24238738, Q24229137, Q2415267, Q2412214, Q2410270, Q2403870, Q23759748, Q23739791, Q2366889, Q2358432, Q22811529, Q2261617, Q2258877, Q2256353, Q22341243, Q2166804, Q2155659, Q21386219, Q21057404, Q21031268, Q21020985, Q20807896, Q20529522, Q20181769, Q20081140, Q20057583, Q20035440, Q19874809, Q19851135, Q1973202, Q19720531, Q1941227, Q1935026, Q1877757, Q186809, Q186801, Q186800, Q186753, Q186717, Q186678, Q186635, Q1866122, Q186065, Q186038, Q18208366, Q1810221, Q1809405, Q1783145, Q1766626, Q17619382, Q17619372, Q1743334, Q1742895, Q1739521, Q1716917, Q17118852, Q1710787, Q1709879, Q1709867, Q1709853, Q1689370, Q1686767, Q1679951, Q16672690, Q1655827, Q1652794, Q1651429, Q1620986, Q1620801, Q1608596, Q15817951, Q15817925, Q15817904, Q15817868, Q15817789, Q15817776, Q15817775, Q15817729, Q15817723, Q15817591, Q15817564, Q15817503, Q15817443, Q15817410, Q15817391, Q15817140, Q15817137, Q15816980, Q15816965, Q15816949, Q15816948, Q15816896, Q15816710, Q15816621, Q15816538, Q15816524, Q15816496, Q15816478, Q15816414, Q15816395, Q15814375, Q15814345, Q15814343, Q15814342, Q15814341, Q15814307, Q15814228, Q15813937, Q15801092, Q1579604, Q15793430, Q15767675, Q15767665, Q15767621, Q15767619, Q15767602, Q15767598, Q15767566, Q15767557, Q15767556, Q15767464, Q15767425, Q15767415, Q15767282, Q15767281, Q15767254, Q15767193, Q15767101, Q15767088, Q15766981, Q15766959, Q15766939, Q15766927, Q15766904, Q15766888, Q15766804, Q15766800, Q15766763, Q15766738, Q15766737, Q15766734, Q15766733, Q15766677, Q15766561, Q15766535, Q15766497, Q15766445, Q15766318, Q15766245, Q15766240, Q15766239, Q15766110, Q15766104, Q15766082, Q15766075, Q15766034, Q15766029, Q15766008, Q15765982, Q15765973, Q15765966, Q15765943, Q15765941, Q15765831, Q15765779, Q15765775, Q15765731, Q15765711, Q15765658, Q15765638, Q15765599, Q15765522, Q15765436, Q15765360, Q15765357, Q15765353, Q15765352, Q15765325, Q15765276, Q15765260, Q15765237, Q15765224, Q15765193, Q15765029, Q15765011, Q15764960, Q15764894, Q15764884, Q15764791, Q15764774, Q15764647, Q15764581, Q15764557, Q15764382, Q15764370, Q15764348, Q15764347, Q15764292, Q15764290, Q15764269, Q15764243, Q15764235, Q15764213, Q15764205, Q15764180, Q15764175, Q15764168, Q15764128, Q15764033, Q15763833, Q15763693, Q15763635, Q15763633, Q15763495, Q15763491, Q15763453, Q15763447, Q15763434, Q15763430, Q15763306, Q15763184, Q15763031, Q15763004, Q15763000, Q15762913, Q15762873, Q15762838, Q15762819, Q15762783, Q15762647, Q15762585, Q15762578, Q15762561, Q15762529, Q15762524, Q15762522, Q15762519, Q15762500, Q15762386, Q15762332, Q15762255, Q15762166, Q15762062, Q15762044, Q15762035, Q15762030, Q15761995, Q15761967, Q15761959, Q15761852, Q15761780, Q15761724, Q15761696, Q15761629, Q15761624, Q15761567, Q15761473, Q15761467, Q15761462, Q15761409, Q15761399, Q15761392, Q15761370, Q15761363, Q15761362, Q15761359, Q15761348, Q15761275, Q15761170, Q15761095, Q15761074, Q15761069, Q15761063, Q15761039, Q15761032, Q15760940, Q15760922, Q15760916, Q15760907, Q15760865, Q15760861, Q15760860, Q15760776, Q15760713, Q15760699, Q15760677, Q15760613, Q15760575, Q15760555, Q15760478, Q15760461, Q15760447, Q15760446, Q15760438, Q15760414, Q15760379, Q15760254, Q15760251, Q15760250, Q15760228, Q15760043, Q15760037, Q15760000, Q15759967, Q15759936, Q15759935, Q15759934, Q15759880, Q15759839, Q15759835, Q15759811, Q15759763, Q15759757, Q15759681, Q15759627, Q15759626, Q15759617, Q15759615, Q15759590, Q15759589, Q15759587, Q15759585, Q15759581, Q15759472, Q15759440, Q15759439, Q15759410, Q15759407, Q15759371, Q15759370, Q15759355, Q15759353, Q15759352, Q15759340, Q15759320, Q15759177, Q15759129, Q15759112, Q15759099, Q15758990, Q15758956, Q15758718, Q15758695, Q15758694, Q15758548, Q15758545, Q15758533, Q15758489, Q15758334, Q15758315, Q15758309, Q15758284, Q15758241, Q15758219, Q15758192, Q15758107, Q15758099, Q15758094, Q15758090, Q15758082, Q15758055, Q15758052, Q15758041, Q15758035, Q15757989, Q15757923, Q15757877, Q15757850, Q15757849, Q15757670, Q15757664, Q15757483, Q15757440, Q15757428, Q15757407, Q15757380, Q15757374, Q15757370, Q15757297, Q15757290, Q15757288, Q15757241, Q15757227, Q15757174, Q15757063, Q15757060, Q15757036, Q15757033, Q15756890, Q15756856, Q15756845, Q15756793, Q15756768, Q15756654, Q15756651, Q15756647, Q15756606, Q15756523, Q15756399, Q15756384, Q15756365, Q15756341, Q15756235, Q15756233, Q15756155, Q15756127, Q15756060, Q15756057, Q15755970, Q15755967, Q15755920, Q15755884, Q15755838, Q15755835, Q15755778, Q15755753, Q15755698, Q15755669, Q15755664, Q15755623, Q15755506, Q15755505, Q15755502, Q15755427, Q15755381, Q15755314, Q15755292, Q15755268, Q15755231, Q15755175, Q15755127, Q15755088, Q15755046, Q15755042, Q15755037, Q15755022, Q15754999, Q15754998, Q15754937, Q15754934, Q15754928, Q15754916, Q15754898, Q15754890, Q15754888, Q15754782, Q15754742, Q15754673, Q15754660, Q15754501, Q15754418, Q15754390, Q15754362, Q15754347, Q15754233, Q15754232, Q15754205, Q15754200, Q15754166, Q15754164, Q15754101, Q15753969, Q15753940, Q15753874, Q15753771, Q15753668, Q15753664, Q15753565, Q15753561, Q15753526, Q15753477, Q15753395, Q15753331, Q15753302, Q15753276, Q15753133, Q15753083, Q15753079, Q15753024, Q15753021, Q15752986, Q15752920, Q15752909, Q15752899, Q15752892, Q15752888, Q15752887, Q15752880, Q15752713, Q15752708, Q15752695, Q15752692, Q15752619, Q15752509, Q15752389, Q15752339, Q15752330, Q15752327, Q15752254, Q15752252, Q15752249, Q15752233, Q15752062, Q15751919, Q15751916, Q15751915, Q15751912, Q15751878, Q15751723, Q15751672, Q15751671, Q15751537, Q15751456, Q15751449, Q15751437, Q15751411, Q15751408, Q15751404, Q15751392, Q15751370, Q15751367, Q15751353, Q15751321, Q15751270, Q15751263, Q15751178, Q15751110, Q15751064, Q15751048, Q15750989, Q15750956, Q15750877, Q15750864, Q15750824, Q15750758, Q15750751, Q15750738, Q15750622, Q15750602, Q15750600, Q15750599, Q15750598, Q15750597, Q15750595, Q15750592, Q15750589, Q15750588, Q15750390, Q15750078, Q15749922, Q15749884, Q15749790, Q15749779, Q15749777, Q15749776, Q15749659, Q15749629, Q15749627, Q15749624, Q15749549, Q15749508, Q15749375, Q15749359, Q15749346, Q15749343, Q15749290, Q15749190, Q15749180, Q15749179, Q15749146, Q15749145, Q15749144, Q15749140, Q15749136, Q15746690, Q15746686, Q15746530, Q15746525, Q15746505, Q15746502, Q15746490, Q15746414, Q15746159, Q15746155, Q15746151, Q15746142, Q15746141, Q15746137, Q15746130, Q15745485, Q15745398, Q15734637, Q15734636, Q15734627, Q15734620, Q15734617, Q15734614, Q15733002, Q1572540, Q15724332, Q15724318, Q15716628, Q15716625, Q15716575, Q15716510, Q15716472, Q15716459, Q15716455, Q15716432, Q15716415, Q15716320, Q15716311, Q15710168, Q15710149, Q15710147, Q15710144, Q15710019, Q15710011, Q15710010, Q15710008, Q15709999, Q15709997, Q15709994, Q15709992, Q15709983, Q15709942, Q15708889, Q15708867, Q15708755, Q15708751, Q15707782, Q15707591, Q15707472, Q15707255, Q15707062, Q1550212, Q1541522, Q1533284, Q15275990, Q15266587, Q1526607, Q1453509, Q1409380, Q1399128, Q1384169, Q135989947, Q135989810, Q135927579, Q135927554, Q135927486, Q135927476, Q135927455, Q135927435, Q135927414, Q135926953, Q135792875, Q135742290, Q135741867, Q135741819, Q135741794, Q135741784, Q135741778, Q135741574, Q135656009, Q135654478, Q135654430, Q135654421, Q135336822, Q13434884, Q13416949, Q13375921, Q131938890, Q131824610, Q1317529, Q131350232, Q131178653, Q131178535, Q131144126, Q13090965, Q130545602, Q130324649, Q130322070, Q1283097, Q12806662, Q12799548, Q1277520, Q127599661, Q1273053, Q126942417, Q1268287, Q12646949, Q12645928, Q1263938, Q1248438, Q124351504, Q124338426, Q124335808, Q124150526, Q12360657, Q12360180, Q12358496, Q123370190, Q12306444, Q12281904, Q1225348, Q1217470, Q12159072, Q1213559, Q120769266, Q12057714, Q12055873, Q1205540, Q12005743, Q11999656, Q11956877, Q11939515, Q119269544, Q11847919, Q11835070, Q11835066, Q11828478, Q11826633, Q11776816, Q116885635, Q116879650, Q114835, Q11379546, Q113279960, Q11169709, Q111522971, Q111218992, Q111198802, Q11116417, Q109616201, Q1074755, Q107192447, Q10669319, Q10662410, Q106490184, Q105710857, Q105710422, Q1053506, Q10524626, Q10524607, Q105015370, Q104527696, Q104527492, Q104503263, Q104439870, Q104144852, Q1032140, Q10321024, Q102828991, Q102828968, Q102828874, Q102828857, Q102828140, Q102828056, Q102827878, Q102827352, Q102825251, Q102487803, Q102479616, Q102477416, Q102472677, Q102467345, Q102444512, Q102424292, Q102395805, Q102290824, Q101010757, Q100791855, Q1004394, Q1004380, ';
		}

    function parseQIDs(input) {
        return input
            .split(/[\s,\n\r]+/)
            .map(qid => qid.trim().toUpperCase())
            .filter(qid => qid.match(/^Q\d+$/))
            .filter((qid, index, self) => self.indexOf(qid) === index);
    }

    async function fetchEntities(qids) {
        const qidString = qids.join('|');
        const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${qidString}&format=json&origin=*&languages=en&props=labels|claims`;
        
        const response = await fetch(url);
        const data = await response.json();
        
        if (!data.entities) throw new Error('Réponse invalide de la part de l\'API de Wikidata');

        const entities = [];
        for (const [qid, entity] of Object.entries(data.entities)) {
            if (entity.missing) continue;

            const processedEntity = {
                qid: qid,
                label: entity.labels?.en?.value || qid,
                website: extractWebsite(entity.claims),
                subjects: await extractSubjects(entity.claims)
            };

            entities.push(processedEntity);
        }

        return entities;
    }

    function extractWebsite(claims) {
        if (!claims || !claims.P856) return null;
        const websiteClaim = claims.P856[0];
        return websiteClaim.mainsnak?.datavalue?.value || null;
    }

    async function extractSubjects(claims) {
        if (!claims || !claims.P921) return [];

        const subjectIds = claims.P921
            .map(claim => claim.mainsnak?.datavalue?.value?.id)
            .filter(Boolean);

        if (subjectIds.length === 0) return [];

        const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${subjectIds.join('|')}&format=json&origin=*&languages=en&props=labels`;
        const response = await fetch(url);
        const data = await response.json();

        return subjectIds.map(id => ({
            id,
            label: data.entities[id]?.labels?.en?.value || id
        }));
    }

    function countSubjects() {
        subjectCounts.clear();
        allEntities.forEach(entity => {
            entity.subjects.forEach(subject => {
                if (allowedSubjects.has(subject.id)) {
                    if (!subjectCounts.has(subject.id)) {
                        subjectCounts.set(subject.id, { label: subject.label, count: 0 });
                    }
                    subjectCounts.get(subject.id).count++;
                }
            });
        });
    }

    function displayFilterButtons() {
        const container = document.getElementById('filterButtons');
        container.innerHTML = '';

        const sortedSubjects = Array.from(subjectCounts.entries())
            .sort((a, b) => b[1].count - a[1].count || a[1].label.localeCompare(b[1].label));

        sortedSubjects.forEach(([id, data]) => {
            const button = document.createElement('button');
            button.className = 'filter-btn';
            button.onclick = () => toggleFilter(id);
            button.setAttribute("data-id", id);
            button.innerHTML = `<span>${data.label}</span><span class="filter-count">${data.count}</span>`;
            container.appendChild(button);
        });

        if (sortedSubjects.length > 0) {
            document.getElementById('filterSection').classList.add('show');
        }
    }

    function toggleFilter(subjectId) {
        if (activeFilters.has(subjectId)) {
            activeFilters.delete(subjectId);
        } else {
            activeFilters.add(subjectId);
        }
        updateFilterButtons();
        applyFilters();
        displayResults();
    }

    function updateFilterButtons() {
        const buttons = document.querySelectorAll('.filter-btn');
        buttons.forEach(button => {
            const subjectId = button.getAttribute("data-id");
            button.classList.toggle('active', activeFilters.has(subjectId));
        });
    }

    function clearAllFilters() {
        activeFilters.clear();
        updateFilterButtons();
        applyFilters();
        displayResults();
    }

    function applyFilters() {
        if (activeFilters.size === 0) {
            filteredEntities = [...allEntities];
        } else {
            filteredEntities = allEntities.filter(entity => {
                return Array.from(activeFilters).every(filterId => 
                    entity.subjects.some(s => s.id === filterId)
                );
            });
        }
    }

    function displayResults() {
        const tbody = document.getElementById('resultsTableBody');
        tbody.innerHTML = '';

        filteredEntities.forEach(entity => {
            const row = document.createElement('tr');

            const websiteCell = entity.website 
                ? `<a href="${entity.website}" target="_blank" class="website-link">${entity.website}</a>`
                : '<span class="no-data">No website</span>';

            const subjectsCell = entity.subjects.length > 0
                ? `<div class="subject-tags">${entity.subjects.map(s => 
                    `<span class="subject-tag">${s.label}</span>`
                  ).join('')}</div>`
                : '<span class="no-data">No subjects</span>';

            row.innerHTML = `
                <td><a href="https://www.wikidata.org/wiki/${entity.qid}" target="_blank" class="qid-link">${entity.qid}</a></td>
                <td><strong>${entity.label}</strong></td>
                <td>${websiteCell}</td>
                <td>${subjectsCell}</td>
            `;
            
            tbody.appendChild(row);
        });

        const activeFiltersText = activeFilters.size > 0 
            ? ` (filtered by: ${Array.from(activeFilters).join(', ')})` 
            : '';
        document.getElementById('resultsCount').textContent = 
            `Affiche ${filteredEntities.length} de ${allEntities.length} entités${activeFiltersText}`;
    }

    function showLoading(show) {
        document.getElementById('loading').classList.toggle('show', show);
    }

    function showError(message) {
        const error = document.getElementById('error');
        error.textContent = message;
        error.classList.add('show');
    }

    function hideError() {
        document.getElementById('error').classList.remove('show');
    }

    function showResults() {
        document.getElementById('resultsSection').classList.add('show');
    }

    function hideResults() {
        document.getElementById('resultsSection').classList.remove('show');
        document.getElementById('filterSection').classList.remove('show');
    }
</script>

</body>
</html>
