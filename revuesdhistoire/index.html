<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revues utiles à la recherche en histoire à l’UdeM</title>
    <!-- web page displayed at https://pmartinolli.github.io/code/revuesdhistoire/ -->
    <meta name="author" content="Pascal Martinolli">
    <meta name="description" content="Ces listes incluent des titres spécialisés en histoire et des titres multidisciplinaires (principalement des revues savantes). Les données sont automatiquement extraites de Wikidata en temps réel.">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .qid-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: monospace;
            resize: vertical;
            outline: none;
            transition: all 0.3s ease;
        }

        .qid-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-help {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }

        .process-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .process-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .process-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            color: #667eea;
            font-size: 18px;
            margin: 20px 0;
            display: none;
        }

        .loading.show {
            display: block;
        }

        .error {
            background: #ffe6e6;
            color: #d63031;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #d63031;
            display: none;
        }

        .error.show {
            display: block;
        }

        .filter-section {
            margin: 30px 0;
            display: none;
        }

        .filter-section.show {
            display: block;
        }

        .filter-title {
            color: #333;
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clear-filters-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .clear-filters-btn:hover {
            background: #ff5252;
            transform: translateY(-1px);
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .filter-btn {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn:hover {
            background: #f0f4ff;
            transform: translateY(-1px);
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .filter-count {
            background: rgba(255, 255, 255, 0.3);
            padding: 2px 2px;
            border-radius: 8px;
            font-size: 8px;
            font-weight: bold;
        }

        .filter-btn.active .filter-count {
            background: rgba(255, 255, 255, 0.2);
        }

        .demo-section {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .demo-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .demo-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .demo-btn:hover {
            background: #5a6fd8;
        }
		
        .results-section {
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .results-count {
            color: #666;
            font-size: 16px;
        }

        .export-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .results-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #f0f0f0;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            vertical-align: top;
        }

        tr:hover {
            background: #f8f9ff;
        }

        .qid-link {
            color: #667eea;
            text-decoration: none;
            font-family: monospace;
            font-weight: bold;
        }

        .qid-link:hover {
            text-decoration: underline;
        }

        .website-link {
            color: #28a745;
            text-decoration: none;
            font-weight: 500;
        }

        .website-link:hover {
            text-decoration: underline;
        }

        .subject-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .subject-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            border: 1px solid #e0e8ff;
        }

        .no-data {
            color: #999;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .filter-buttons {
                gap: 8px;
            }
            
            .filter-btn {
                padding: 8px 15px;
                font-size: 13px;
            }
            
            th, td {
                padding: 10px 8px;
                font-size: 14px;
            }
            
            .results-header {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Revues utiles à la recherche en histoire à l’UdeM</h1>
        <p>
        Ces listes incluent des titres spécialisés en histoire et des titres multidisciplinaires (principalement des revues savantes). Les données sont automatiquement extraites de Wikidata en temps réel et elles peuvent donc contenir des lacunes ou des erreurs. Vous êtes chaleureusement invités à contribuer à Wikidata pour améliorer ces données (contacter votre <a href="https://boite-outils.bib.umontreal.ca/etudes-religieuses-histoire-philosophie/histoire">bibliothécaire en histoire</a> qui se fera un plaisir de vous guider). En <a href="faq.html">savoir plus</a>.
        </p>
        
        </p>
        <div class="input-section">
            <h3>📝 Saisir les QIDs des revues à afficher, ou Charger les données automatiquement depuis la :</h3>
			            <button class="demo-btn" onclick="loadBibData()">Liste du bibliothécaire (370+)</button>
						<button class="demo-btn" onclick="loadDOAJData()">Liste 'histoire' du DOAJ (1200+)</button>
            			<button class="demo-btn" onclick="loadSCIMAGOJRData()">Liste 'histoire' du ScimagoJR (1800+)</button>
            <textarea 
                class="qid-input" 
                id="qidInput" 
                placeholder="Saisir les QIDs séparés par des virgules, des espaces ou un par ligne."
            ></textarea>
            <div class="input-help">Saisir les QIDs séparés par des virgules, des espaces ou un par ligne.</div>
            <button class="process-btn" onclick="processQIDs()" id="processBtn">
                🚀 Traitement des QIDs
            </button>
        </div>

        <div class="loading" id="loading">🔄 Traitement des QIDs et extraction des données...</div>
        <div class="error" id="error"></div>

        <div class="filter-section" id="filterSection">
            <div class="filter-title">
                🏷️ Filtrer par sujet (P921)
                <button class="clear-filters-btn" onclick="clearAllFilters()">Réinitialiser</button>
            </div>
            <div class="filter-buttons" id="filterButtons"></div>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <div class="results-count" id="resultsCount"></div>
            <!--    <button class="export-btn" onclick="exportToCSV()">📊 Exporter en CSV</button>  -->
            </div>
            <div class="results-table">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>QID</th>
                                <th>Nom de la revue</th>
                                <th>Site web officiel (P856) et recherche dans Sofia UdeM</th>
                                <th>Sujets (P921)</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
		<p>Chercheuses et chercheurs UdeM : L’accès depuis l’extérieur du campus à la plupart des revues en version électronique nécessite la configuration du <a href="https://studio.bib.umontreal.ca/informatique/proxy/">proxy</a>. Les bibliothèques/UdeM n’ont pas nécessairement un abonnement courant ou un accès aux archives complètes des revues listées ci-dessous. Si l’article voulu n’est pas disponible dans les abonnements UdeM, faites une demande de <a href="https://bib.umontreal.ca/obtenir/peb/">prêt entre bibliothèques</a>. Article disponible en papier seulement ? Faites une <a href="https://bib.umontreal.ca/obtenir/numerisation"> demande de numérisation</a>.
    </div>

    <script>
    let allEntities = [];
    let filteredEntities = [];
    let activeFilters = new Set();
    let subjectCounts = new Map();

    // ✅ Allowed QIDs for filters (list of history topics relevant for the Department
    const allowedSubjects = new Set([
                                     "Q41493", // ancient history
                                     "Q27992545", // medieval history
                                     "Q3281534", // modern period
                                     "Q186075", // contemporary history
                                     "Q192781", // military history
                                     "Q111938447", // history of peace
                                     "Q109577608", // history of genocide
                                     "Q149813", // history of Africa
                                     "Q627531", // history of Asia
                                     "Q82972", // history of China
                                     "Q2945", // history of Canada
                                     "Q7787", // history of Europe
                                     "Q7778", // history of France
                                     "Q7791", // history of Italy
                                     "Q113162", // history of the United Kingdom
                                     "Q205157", // history of Ireland
                                     "Q131110", // history of the United States
                                     "Q2365406", // history of Latin America
                                     "Q4816595", // Atlantic world 
                                     "Q55022436", // history of international relations
                                     "Q3245246", // history of colonialism
                                     "Q1279400", // women's history
                                     "Q1517835", // gender history
                                     "Q105960891", // history of indigenous peoples
                                     "Q908604", // social history
                                     "Q858517", // cultural history
                                     "Q680004", // legal history
                                     "Q1147507", // political history
                                     "Q846742", // history of religions
                                     "Q642379", // history of Islam
                                     "Q12211529", // Middle Eastern studies
                                     "Q3137714", // history of Maghreb
                                     "Q3621186", // Arabic studies
                                     "Q12408688", // Palestinian studies
                                     "Q135999455", // history of youth
                                     "Q4204823", // history of childhood
                                     "Q201486", // history of science
                                     "Q380274", // history of medicine
                                     "Q1195695", // intellectual history
                                     "Q570018", // history of ideas
                                     "Q50675", // historiography
                                     "Q59029", // labor history
                                     "Q47398", // economic history
                                     "Q952080", // history of agriculture
                                     "Q7380580", // rural history
                                     "Q1561862", // environmental history
                                     "Q1569011", // urban history
									]);

    async function processQIDs() {
        const input = document.getElementById('qidInput').value.trim();
        if (!input) {
            showError('Saisir au moins un QID.');
            return;
        }

        const qids = parseQIDs(input);
        if (qids.length === 0) {
            showError('Aucun QID valide repéré. Vérifier le format d\'importation.');
            return;
        }

        showLoading(true);
        hideError();
        hideResults();
        
        const processBtn = document.getElementById('processBtn');
        processBtn.disabled = true;

        try {
            allEntities = [];
            subjectCounts.clear();

            const batchSize = 50;
            for (let i = 0; i < qids.length; i += batchSize) {
                const batch = qids.slice(i, i + batchSize);
                const batchEntities = await fetchEntities(batch);
                allEntities = allEntities.concat(batchEntities);
            }

            if (allEntities.length === 0) {
                showError('Pas d\'entité valide repérée pour les QIDs soumis.');
                return;
            }

            countSubjects();
            filteredEntities = [...allEntities];
            activeFilters.clear();

            displayFilterButtons();
            displayResults();
            showResults();

        } catch (error) {
            console.error('Erreur lors du traitement des QIDs:', error);
            showError('Erreur lors du traitement des QIDs. Merci de relancer.');
        } finally {
            showLoading(false);
            processBtn.disabled = false;
        }
    }

    function loadBibData() {
        document.getElementById('qidInput').value = 'Q96696272, Q27715829, Q81661038, Q1533284, Q15761069, Q15734637, Q1526607, Q3137027, Q15750588, Q15710144, Q50811044, Q15758694, Q106490184, Q15801092, Q689414, Q6094746, Q63871834, Q15755664, Q1709853, Q6295426, Q15765711, Q3195472, Q616020, Q6467369, Q1877757, Q15753276, Q96716175, Q15275990, Q3346085, Q3346085, Q15762524, Q15761409, Q3409088, Q15754916, Q3428644, Q3428655, Q15814307, Q96324577, Q15766804, Q15757288, Q15757664, Q15757664, Q2261617, Q21031268, Q7575349, Q15752327, Q3517743, Q4744238, Q15749777, Q15762044, Q6020500, Q135989947, Q1742895, Q1809405, Q1004380, Q100791855, Q1032140, Q1053506, Q12005743, Q1205540, Q1217470, Q12645928, Q1268287, Q13375921, Q135792875, Q1399128, Q1541522, Q15707062, Q15707255, Q15707591, Q15708751, Q15708755, Q15709942, Q15709997, Q15709999, Q15710019, Q15716415, Q15716472, Q15724318, Q15745485, Q15746414, Q15749144, Q15749180, Q15749508, Q15749776, Q15749884, Q15750390, Q15750595, Q15750597, Q15750599, Q15750824, Q15751048, Q15751064, Q15751367, Q15751404, Q15751912, Q15751915, Q15751916, Q15751919, Q15752249, Q15752254, Q15752619, Q15752880, Q15752909, Q15753021, Q15753940, Q15753969, Q15754164, Q15754166, Q15754205, Q15754233, Q15754660, Q15754673, Q15754782, Q15754934, Q15754937, Q15755088, Q15755506, Q15755698, Q15755753, Q15755838, Q15755884, Q15755967, Q15756341, Q15756768, Q15756856, Q15757227, Q15757370, Q15757374, Q15757440, Q15757849, Q15757850, Q15758055, Q15758309, Q15758315, Q15758334, Q15758545, Q15758695, Q15758956, Q15759472, Q15759585, Q15759681, Q15759835, Q15759935, Q15760379, Q15760438, Q15760613, Q15760677, Q15760776, Q15760865, Q15760922, Q15761039, Q15761095, Q15761399, Q15761462, Q15761629, Q15761724, Q15762030, Q15762035, Q15762062, Q15762500, Q15762913, Q15763495, Q15764205, Q15764347, Q15764382, Q15765029, Q15765325, Q15765353, Q15765436, Q15765973, Q15766034, Q15766075, Q15766082, Q15766240, Q15766318, Q15766738, Q15767254, Q15767415, Q15767557, Q15767598, Q15767675, Q1579604, Q15814375, Q15817137, Q15817925, Q1608596, Q1679951, Q1709867, Q1709879, Q1710787, Q1716917, Q1783145, Q1810221, Q186717, Q1941227, Q19851135, Q20081140, Q21020985, Q2166804, Q22811529, Q2366889, Q23759748, Q2403870, Q2415267, Q24238738, Q2503342, Q26849526, Q26849617, Q27715641, Q27715679, Q27715859, Q27715919, Q27716594, Q27719001, Q27719037, Q27722635, Q27921636, Q2810781, Q2823586, Q282477, Q2844846, Q2845020, Q2850663, Q2850699, Q2860195, Q28603621, Q29043990, Q29059279, Q2918516, Q2928051, Q2928071, Q2933107, Q2933112, Q2933113, Q2933118, Q2933121, Q2933128, Q2933146, Q2979361, Q3026028, Q3098897, Q3100810, Q3136533, Q3136538, Q3186955, Q3224839, Q3276833, Q3313811, Q3332702, Q3416479, Q3421962, Q3421969, Q3421978, Q3421979, Q3424061, Q3428620, Q3428642, Q3428645, Q3428647, Q3428649, Q3428676, Q3428686, Q3428697, Q3560263, Q3586209, Q3592587, Q389936, Q3926551, Q42020894, Q4391074, Q4652083, Q465332, Q4668339, Q4689758, Q471378, Q4744109, Q4744221, Q4744251, Q47456350, Q47518673, Q4763427, Q4775205, Q4806750, Q4824354, Q4996846, Q50520948, Q50534447, Q5061045, Q50808285, Q50814520, Q50815451, Q50815455, Q50816573, Q5128255, Q5134329, Q5155627, Q5164979, Q5349065, Q53952813, Q53953010, Q53966481, Q53967759, Q5404381, Q5412665, Q5421342, Q5449598, Q5501783, Q5501784, Q55174624, Q5530932, Q55397544, Q5618698, Q5676459, Q56825794, Q56825810, Q56825923, Q57064282, Q57244325, Q57274302, Q5773941, Q5774620, Q5774685, Q5774776, Q58214283, Q58335332, Q5937513, Q6294759, Q6294876, Q6294983, Q6295197, Q6295549, Q6295853, Q6295929, Q6295955, Q6296028, Q6296147, Q635611, Q635850, Q63871836, Q6467152, Q6495229, Q6496242, Q6553313, Q66115552, Q6815693, Q6888570, Q6888582, Q6979868, Q7278875, Q7318402, Q7550788, Q7628021, Q7721734, Q7722548, Q7731520, Q7739760, Q7739760, Q7743549, Q7743575, Q7743576, Q7753584, Q81849192, Q856645, Q88349845, Q88977165, Q94153204, Q96321132, Q96699572, Q96700952, Q96701593, Q96702190, Q96725331, Q9182836, Q1277520, Q3365487, Q136090518';
    }
	
	function loadSCIMAGOJRData() {
            document.getElementById('qidInput').value = 'Q99066908, Q97727193, Q96738635, Q96738388, Q96738165, Q96737907, Q96736372, Q96736339, Q96735929, Q96735792, Q96734674, Q96734484, Q96734070, Q96734041, Q96733890, Q96733865, Q96733855, Q96733793, Q96733181, Q96733155, Q96733089, Q96732833, Q96732363, Q96732298, Q96732126, Q96731376, Q96731245, Q96730912, Q96730543, Q96730421, Q96730350, Q96730135, Q96729749, Q96727939, Q96727721, Q96727476, Q96727357, Q96727306, Q96726813, Q96726769, Q96726383, Q96726223, Q96725996, Q96725887, Q96725640, Q96725553, Q96725387, Q96725331, Q96725244, Q96724945, Q96724708, Q96724410, Q96723254, Q96722880, Q96722730, Q96722597, Q96722473, Q96721676, Q96721232, Q96721198, Q96721057, Q96720759, Q96720654, Q96720310, Q96719650, Q96719085, Q96718023, Q96717840, Q96717830, Q96717713, Q96717529, Q96717404, Q96716955, Q96716511, Q96716220, Q96716175, Q96714870, Q96713660, Q96713646, Q96713506, Q96713201, Q96712514, Q96711241, Q96710875, Q96710831, Q96710084, Q96709169, Q96709016, Q96708998, Q96708750, Q96708743, Q96708102, Q96707953, Q96707446, Q96707410, Q96706816, Q96706805, Q96706593, Q96706554, Q96706543, Q96706516, Q96706432, Q96706429, Q96706412, Q96706396, Q96706351, Q96706350, Q96706182, Q96706130, Q96705943, Q96705924, Q96705816, Q96705547, Q96705091, Q96704849, Q96704532, Q96704414, Q96704340, Q96704314, Q96704037, Q96704031, Q96703790, Q96703733, Q96703517, Q96703367, Q96703006, Q96702190, Q96701614, Q96701593, Q96701519, Q96701388, Q96700952, Q96700869, Q96700790, Q96700577, Q96700527, Q96700155, Q96699903, Q96699572, Q96699556, Q96699521, Q96698996, Q96698766, Q96698412, Q96698199, Q96698175, Q96697596, Q96697509, Q96697327, Q96696272, Q96696267, Q96695820, Q96695774, Q96695481, Q96335190, Q96335115, Q96335083, Q96334921, Q96334836, Q96334826, Q96334820, Q96334815, Q96334795, Q96334794, Q96334728, Q96334631, Q96334586, Q96334408, Q96334403, Q96334347, Q96334346, Q96334330, Q96334327, Q96334288, Q96334160, Q96334084, Q96334062, Q96334050, Q96334049, Q96334047, Q96334024, Q96334012, Q96334003, Q96333991, Q96333989, Q96333983, Q96333981, Q96333976, Q96333965, Q96333963, Q96333957, Q96333938, Q96333937, Q96333930, Q96333828, Q96333773, Q96333681, Q96333665, Q96333611, Q96333429, Q96332726, Q96332713, Q96332698, Q96332530, Q96332525, Q96332522, Q96332518, Q96332513, Q96332491, Q96332454, Q96332358, Q96332272, Q96332255, Q96332244, Q96332143, Q96332072, Q96331802, Q96331754, Q96331534, Q96331520, Q96331398, Q96331378, Q96331374, Q96331363, Q96331312, Q96331264, Q96331238, Q96331130, Q96331050, Q96331035, Q96330989, Q96330987, Q96330978, Q96330976, Q96330972, Q96330890, Q96330875, Q96330843, Q96330770, Q96330732, Q96330662, Q96330661, Q96330636, Q96330565, Q96330523, Q96330434, Q96330358, Q96330066, Q96330062, Q96330052, Q96330036, Q96330029, Q96330025, Q96329916, Q96329877, Q96329620, Q96329482, Q96329462, Q96329446, Q96329342, Q96329139, Q96329111, Q96329083, Q96329054, Q96329053, Q96328980, Q96328972, Q96328953, Q96328934, Q96328914, Q96328907, Q96328903, Q96328900, Q96328897, Q96328889, Q96328885, Q96328881, Q96328876, Q96328799, Q96328786, Q96328731, Q96328684, Q96328683, Q96328655, Q96328233, Q96328129, Q96328110, Q96328107, Q96328066, Q96328042, Q96327894, Q96327778, Q96327662, Q96327607, Q96327568, Q96327503, Q96327479, Q96327352, Q96327330, Q96327245, Q96327209, Q96327188, Q96326991, Q96326775, Q96326422, Q96326360, Q96326345, Q96326295, Q96326286, Q96326271, Q96326267, Q96326244, Q96326214, Q96326189, Q96326165, Q96326161, Q96326153, Q96326113, Q96326108, Q96326102, Q96326090, Q96326056, Q96326051, Q96326047, Q96326012, Q96325974, Q96325843, Q96325813, Q96325758, Q96325750, Q96325385, Q96325342, Q96325336, Q96325223, Q96325172, Q96325050, Q96324944, Q96324887, Q96324881, Q96324877, Q96324840, Q96324824, Q96324763, Q96324661, Q96324577, Q96324499, Q96324458, Q96321132, Q96320824, Q96320495, Q94153204, Q9386958, Q9369161, Q9347342, Q9338524, Q9338523, Q9334636, Q9182836, Q9182835, Q918039, Q91783667, Q91777694, Q91776627, Q91644408, Q91638718, Q9138991, Q9138986, Q9138967, Q9068473, Q89679692, Q89490561, Q88977207, Q88977165, Q88966995, Q88349845, Q871189, Q856667, Q856645, Q85097495, Q84588333, Q84563357, Q84309632, Q81849192, Q81661038, Q8047382, Q80452753, Q8026525, Q7987841, Q7981920, Q7968612, Q7928932, Q7927331, Q7923855, Q78352066, Q7783441, Q7764766, Q776367, Q7762641, Q7758693, Q7757649, Q7753584, Q7743638, Q7743576, Q7743575, Q7743549, Q7739760, Q7735257, Q7732615, Q7731520, Q7727851, Q772287, Q7722548, Q7721734, Q7714670, Q7703209, Q76998312, Q7692591, Q7628082, Q7628046, Q7628021, Q7628020, Q7578151, Q7575349, Q7550865, Q7550788, Q7550776, Q7550658, Q7500070, Q74435473, Q73908443, Q73908428, Q73551781, Q7318986, Q7318487, Q7318402, Q7278875, Q7268452, Q7257479, Q7238215, Q722773, Q7210240, Q7186103, Q7168869, Q7163760, Q7138992, Q7135216, Q7122588, Q7122492, Q7061723, Q7015460, Q7012392, Q7012075, Q6984368, Q6979868, Q6979813, Q69560504, Q6937141, Q689414, Q6889120, Q6888582, Q6888570, Q6841334, Q6825992, Q6816229, Q6815693, Q6807053, Q6786154, Q6746655, Q6730485, Q6705203, Q66115552, Q65947244, Q65929208, Q65929200, Q65929194, Q6571575, Q65618887, Q6553313, Q65152559, Q6507338, Q65048150, Q65041336, Q6496242, Q6496198, Q6495229, Q6467369, Q6467172, Q6467152, Q64507706, Q64507651, Q64507319, Q64372057, Q64352921, Q6431926, Q6431659, Q63993614, Q63991660, Q63928581, Q63871836, Q63871834, Q63871831, Q63871829, Q63871773, Q63871648, Q63871645, Q63871644, Q63871626, Q63871610, Q63871603, Q63871588, Q635850, Q635627, Q635611, Q63383062, Q63171041, Q63092347, Q6296211, Q6296188, Q6296147, Q6296132, Q6296065, Q6296041, Q6296028, Q6295955, Q6295929, Q6295920, Q6295913, Q6295898, Q6295892, Q6295853, Q6295754, Q6295735, Q6295549, Q6295547, Q6295426, Q6295386, Q6295251, Q6295197, Q6294983, Q6294981, Q6294950, Q6294876, Q6294803, Q6294764, Q6294759, Q6294738, Q6294705, Q62665589, Q62023802, Q6185190, Q616020, Q6107109, Q6094746, Q6087238, Q6087231, Q60861467, Q60847859, Q60686393, Q60686370, Q6067557, Q6067349, Q6051423, Q6051286, Q60420876, Q6041301, Q6035751, Q60330914, Q603149, Q6030640, Q6020500, Q6020249, Q60105390, Q60040607, Q5984884, Q59772450, Q59468117, Q59429348, Q59390808, Q5937513, Q59289096, Q5866179, Q5866092, Q58468284, Q58335332, Q58234452, Q58214283, Q58011226, Q5774776, Q5774685, Q5774620, Q5773941, Q5773182, Q576066, Q57584928, Q57584772, Q57315436, Q57315389, Q57315347, Q57274302, Q57244325, Q57205833, Q57064282, Q56887191, Q56886923, Q56878087, Q56878058, Q56825923, Q56825810, Q56825794, Q56823466, Q5676459, Q56696298, Q56338197, Q56317766, Q56317343, Q56317201, Q56293427, Q56254713, Q5618698, Q55810461, Q55760410, Q55760336, Q55760095, Q55658698, Q5551195, Q55397544, Q55397534, Q5530932, Q55174624, Q55174566, Q55086326, Q5501928, Q5501871, Q5501784, Q5501783, Q5501744, Q54941028, Q5449598, Q5448899, Q5421342, Q54131776, Q5412665, Q5412087, Q5404391, Q5404381, Q53967759, Q53966481, Q53953010, Q53952906, Q53952822, Q53952813, Q53952291, Q53918624, Q5382167, Q5380365, Q5349065, Q5338215, Q5326727, Q5323289, Q52990989, Q5279394, Q5238184, Q52196360, Q52160230, Q52158487, Q51999643, Q5195051, Q51845880, Q5165794, Q5165411, Q5164979, Q5155627, Q5134329, Q5128255, Q51122343, Q50817989, Q50817933, Q50817893, Q50817856, Q50817763, Q50817640, Q50817567, Q50817418, Q50817341, Q50817329, Q50817326, Q50817155, Q50817148, Q50817117, Q50816996, Q50816943, Q50816942, Q50816941, Q50816773, Q50816687, Q50816653, Q50816582, Q50816573, Q50816510, Q50816482, Q50816354, Q50816131, Q50815800, Q50815770, Q50815668, Q50815662, Q50815654, Q50815648, Q50815519, Q50815455, Q50815451, Q50815260, Q50815245, Q50815215, Q50815187, Q50815179, Q50815106, Q50815068, Q50815037, Q50814837, Q50814771, Q50814596, Q50814589, Q50814542, Q50814530, Q50814520, Q50814383, Q50814365, Q50814348, Q50814224, Q50812357, Q50812145, Q50812141, Q50811799, Q50811784, Q50811774, Q50811771, Q50811642, Q50811635, Q50811444, Q50811435, Q50811394, Q50811335, Q50811189, Q50811119, Q50811044, Q50810983, Q50810950, Q50810888, Q50810837, Q50810765, Q50810742, Q50810738, Q50810543, Q50808454, Q50808451, Q50808446, Q50808424, Q50808401, Q50808378, Q50808362, Q50808342, Q50808293, Q50808285, Q50808251, Q50808247, Q50808237, Q50808226, Q50808209, Q50807174, Q50807154, Q50807146, Q50806996, Q50806660, Q50667848, Q5061045, Q50557884, Q50553215, Q50553162, Q50552832, Q50552752, Q50552749, Q50534592, Q50534587, Q50534579, Q50534543, Q50534447, Q50534310, Q50521456, Q50521444, Q50520948, Q50520781, Q50518146, Q50518133, Q50518127, Q50518125, Q50518124, Q50516908, Q50515794, Q50504637, Q50498055, Q50497996, Q50497955, Q50497937, Q50497832, Q50497748, Q50497554, Q50497476, Q50497421, Q50481552, Q50481538, Q50478724, Q50478627, Q50478607, Q50478579, Q50434983, Q50434980, Q50434977, Q50434968, Q50434852, Q50434820, Q50434700, Q50432892, Q50432848, Q50432823, Q50432273, Q50431732, Q50426519, Q50426299, Q50425426, Q50425207, Q50403241, Q50403023, Q5035430, Q5030601, Q5030231, Q5017412, Q4996846, Q4984286, Q4970991, Q4970183, Q49638096, Q4949913, Q4943578, Q4942937, Q4914884, Q48842799, Q48814692, Q4846673, Q4836917, Q4824354, Q4821243, Q4807726, Q4806750, Q480577, Q4790506, Q4787315, Q4787299, Q4787289, Q4783420, Q4778488, Q4777706, Q4777701, Q4775205, Q4774857, Q4763668, Q4763427, Q47545087, Q47518673, Q4751657, Q4751015, Q47458802, Q47456350, Q4744777, Q4744472, Q4744365, Q4744251, Q4744238, Q4744221, Q4744109, Q4743492, Q4742995, Q4742458, Q4736262, Q471378, Q47012220, Q47010074, Q4689977, Q4689921, Q4689782, Q4689758, Q4672768, Q4668339, Q465332, Q4652083, Q4455439, Q44492240, Q44281020, Q4397976, Q4391074, Q43755801, Q43379078, Q42730556, Q42020894, Q4162197, Q4126417, Q4125003, Q4115333, Q4041570, Q4041305, Q4040686, Q4035788, Q4033164, Q3944882, Q3926551, Q389936, Q3885813, Q385919, Q3820793, Q3810630, Q3745516, Q36937339, Q3686729, Q3592587, Q3586209, Q3560263, Q35387261, Q3517743, Q3509007, Q3486571, Q3453515, Q3441121, Q3428740, Q3428701, Q3428699, Q3428697, Q3428695, Q3428686, Q3428676, Q3428659, Q3428655, Q3428649, Q3428647, Q3428645, Q3428644, Q3428642, Q3428632, Q3428620, Q3424061, Q3421979, Q3421978, Q3421969, Q3421962, Q3416479, Q3409088, Q3403445, Q3365487, Q3346085, Q3332702, Q3330664, Q3313811, Q3311651, Q3293267, Q3276833, Q3224839, Q32246, Q3224523, Q3195472, Q3186955, Q3186897, Q3186854, Q3186808, Q3137027, Q3136538, Q3136533, Q3100984, Q3100810, Q3098897, Q3076430, Q3060776, Q3026028, Q301654, Q29914116, Q2979361, Q2933146, Q2933134, Q2933128, Q2933121, Q2933118, Q2933113, Q2933112, Q2933107, Q2928071, Q2928051, Q2918516, Q2911917, Q29059279, Q29043990, Q29043967, Q29043867, Q29043794, Q2902198, Q28868226, Q28807437, Q28807311, Q28674098, Q28674093, Q28603621, Q2860195, Q2850699, Q2850663, Q2845020, Q2844846, Q28363416, Q282477, Q2823586, Q28160598, Q28119910, Q2811847, Q2810781, Q28045170, Q27996900, Q27966326, Q27963511, Q27927734, Q27921636, Q27727641, Q27726840, Q27726174, Q27725268, Q27724978, Q27724034, Q27723088, Q27722714, Q27722635, Q27722633, Q27722616, Q27722615, Q27722323, Q27722250, Q27722249, Q27721633, Q27721632, Q27721630, Q27721519, Q27719037, Q27719030, Q27719001, Q27718942, Q27718715, Q27718539, Q27716613, Q27716596, Q27716594, Q27716482, Q27716425, Q27716412, Q27716402, Q27716181, Q27716178, Q27716138, Q27716131, Q27716122, Q27716025, Q27715977, Q27715952, Q27715919, Q27715887, Q27715859, Q27715829, Q27715795, Q27715794, Q27715768, Q27715709, Q27715679, Q27715641, Q27715578, Q27715541, Q27715506, Q27715222, Q27714902, Q27436709, Q2740960, Q27063807, Q26849617, Q26849594, Q26849526, Q26849518, Q26438883, Q26319487, Q26305317, Q2563492, Q25570848, Q25436122, Q2503342, Q24914818, Q24911767, Q248774, Q24525533, Q24525511, Q24525482, Q24525433, Q24238738, Q24229137, Q2415267, Q2412214, Q2410270, Q2403870, Q23759748, Q23739791, Q2366889, Q2358432, Q22811529, Q2261617, Q2258877, Q2256353, Q22341243, Q2166804, Q2155659, Q21386219, Q21057404, Q21031268, Q21020985, Q20807896, Q20529522, Q20181769, Q20081140, Q20057583, Q20035440, Q19874809, Q19851135, Q1973202, Q19720531, Q1941227, Q1935026, Q1877757, Q186809, Q186801, Q186800, Q186753, Q186717, Q186678, Q186635, Q1866122, Q186065, Q186038, Q18208366, Q1810221, Q1809405, Q1783145, Q1766626, Q17619382, Q17619372, Q1743334, Q1742895, Q1739521, Q1716917, Q17118852, Q1710787, Q1709879, Q1709867, Q1709853, Q1689370, Q1686767, Q1679951, Q16672690, Q1655827, Q1652794, Q1651429, Q1620986, Q1620801, Q1608596, Q15817951, Q15817925, Q15817904, Q15817868, Q15817789, Q15817776, Q15817775, Q15817729, Q15817723, Q15817591, Q15817564, Q15817503, Q15817443, Q15817410, Q15817391, Q15817140, Q15817137, Q15816980, Q15816965, Q15816949, Q15816948, Q15816896, Q15816710, Q15816621, Q15816538, Q15816524, Q15816496, Q15816478, Q15816414, Q15816395, Q15814375, Q15814345, Q15814343, Q15814342, Q15814341, Q15814307, Q15814228, Q15813937, Q15801092, Q1579604, Q15793430, Q15767675, Q15767665, Q15767621, Q15767619, Q15767602, Q15767598, Q15767566, Q15767557, Q15767556, Q15767464, Q15767425, Q15767415, Q15767282, Q15767281, Q15767254, Q15767193, Q15767101, Q15767088, Q15766981, Q15766959, Q15766939, Q15766927, Q15766904, Q15766888, Q15766804, Q15766800, Q15766763, Q15766738, Q15766737, Q15766734, Q15766733, Q15766677, Q15766561, Q15766535, Q15766497, Q15766445, Q15766318, Q15766245, Q15766240, Q15766239, Q15766110, Q15766104, Q15766082, Q15766075, Q15766034, Q15766029, Q15766008, Q15765982, Q15765973, Q15765966, Q15765943, Q15765941, Q15765831, Q15765779, Q15765775, Q15765731, Q15765711, Q15765658, Q15765638, Q15765599, Q15765522, Q15765436, Q15765360, Q15765357, Q15765353, Q15765352, Q15765325, Q15765276, Q15765260, Q15765237, Q15765224, Q15765193, Q15765029, Q15765011, Q15764960, Q15764894, Q15764884, Q15764791, Q15764774, Q15764647, Q15764581, Q15764557, Q15764382, Q15764370, Q15764348, Q15764347, Q15764292, Q15764290, Q15764269, Q15764243, Q15764235, Q15764213, Q15764205, Q15764180, Q15764175, Q15764168, Q15764128, Q15764033, Q15763833, Q15763693, Q15763635, Q15763633, Q15763495, Q15763491, Q15763453, Q15763447, Q15763434, Q15763430, Q15763306, Q15763184, Q15763031, Q15763004, Q15763000, Q15762913, Q15762873, Q15762838, Q15762819, Q15762783, Q15762647, Q15762585, Q15762578, Q15762561, Q15762529, Q15762524, Q15762522, Q15762519, Q15762500, Q15762386, Q15762332, Q15762255, Q15762166, Q15762062, Q15762044, Q15762035, Q15762030, Q15761995, Q15761967, Q15761959, Q15761852, Q15761780, Q15761724, Q15761696, Q15761629, Q15761624, Q15761567, Q15761473, Q15761467, Q15761462, Q15761409, Q15761399, Q15761392, Q15761370, Q15761363, Q15761362, Q15761359, Q15761348, Q15761275, Q15761170, Q15761095, Q15761074, Q15761069, Q15761063, Q15761039, Q15761032, Q15760940, Q15760922, Q15760916, Q15760907, Q15760865, Q15760861, Q15760860, Q15760776, Q15760713, Q15760699, Q15760677, Q15760613, Q15760575, Q15760555, Q15760478, Q15760461, Q15760447, Q15760446, Q15760438, Q15760414, Q15760379, Q15760254, Q15760251, Q15760250, Q15760228, Q15760043, Q15760037, Q15760000, Q15759967, Q15759936, Q15759935, Q15759934, Q15759880, Q15759839, Q15759835, Q15759811, Q15759763, Q15759757, Q15759681, Q15759627, Q15759626, Q15759617, Q15759615, Q15759590, Q15759589, Q15759587, Q15759585, Q15759581, Q15759472, Q15759440, Q15759439, Q15759410, Q15759407, Q15759371, Q15759370, Q15759355, Q15759353, Q15759352, Q15759340, Q15759320, Q15759177, Q15759129, Q15759112, Q15759099, Q15758990, Q15758956, Q15758718, Q15758695, Q15758694, Q15758548, Q15758545, Q15758533, Q15758489, Q15758334, Q15758315, Q15758309, Q15758284, Q15758241, Q15758219, Q15758192, Q15758107, Q15758099, Q15758094, Q15758090, Q15758082, Q15758055, Q15758052, Q15758041, Q15758035, Q15757989, Q15757923, Q15757877, Q15757850, Q15757849, Q15757670, Q15757664, Q15757483, Q15757440, Q15757428, Q15757407, Q15757380, Q15757374, Q15757370, Q15757297, Q15757290, Q15757288, Q15757241, Q15757227, Q15757174, Q15757063, Q15757060, Q15757036, Q15757033, Q15756890, Q15756856, Q15756845, Q15756793, Q15756768, Q15756654, Q15756651, Q15756647, Q15756606, Q15756523, Q15756399, Q15756384, Q15756365, Q15756341, Q15756235, Q15756233, Q15756155, Q15756127, Q15756060, Q15756057, Q15755970, Q15755967, Q15755920, Q15755884, Q15755838, Q15755835, Q15755778, Q15755753, Q15755698, Q15755669, Q15755664, Q15755623, Q15755506, Q15755505, Q15755502, Q15755427, Q15755381, Q15755314, Q15755292, Q15755268, Q15755231, Q15755175, Q15755127, Q15755088, Q15755046, Q15755042, Q15755037, Q15755022, Q15754999, Q15754998, Q15754937, Q15754934, Q15754928, Q15754916, Q15754898, Q15754890, Q15754888, Q15754782, Q15754742, Q15754673, Q15754660, Q15754501, Q15754418, Q15754390, Q15754362, Q15754347, Q15754233, Q15754232, Q15754205, Q15754200, Q15754166, Q15754164, Q15754101, Q15753969, Q15753940, Q15753874, Q15753771, Q15753668, Q15753664, Q15753565, Q15753561, Q15753526, Q15753477, Q15753395, Q15753331, Q15753302, Q15753276, Q15753133, Q15753083, Q15753079, Q15753024, Q15753021, Q15752986, Q15752920, Q15752909, Q15752899, Q15752892, Q15752888, Q15752887, Q15752880, Q15752713, Q15752708, Q15752695, Q15752692, Q15752619, Q15752509, Q15752389, Q15752339, Q15752330, Q15752327, Q15752254, Q15752252, Q15752249, Q15752233, Q15752062, Q15751919, Q15751916, Q15751915, Q15751912, Q15751878, Q15751723, Q15751672, Q15751671, Q15751537, Q15751456, Q15751449, Q15751437, Q15751411, Q15751408, Q15751404, Q15751392, Q15751370, Q15751367, Q15751353, Q15751321, Q15751270, Q15751263, Q15751178, Q15751110, Q15751064, Q15751048, Q15750989, Q15750956, Q15750877, Q15750864, Q15750824, Q15750758, Q15750751, Q15750738, Q15750622, Q15750602, Q15750600, Q15750599, Q15750598, Q15750597, Q15750595, Q15750592, Q15750589, Q15750588, Q15750390, Q15750078, Q15749922, Q15749884, Q15749790, Q15749779, Q15749777, Q15749776, Q15749659, Q15749629, Q15749627, Q15749624, Q15749549, Q15749508, Q15749375, Q15749359, Q15749346, Q15749343, Q15749290, Q15749190, Q15749180, Q15749179, Q15749146, Q15749145, Q15749144, Q15749140, Q15749136, Q15746690, Q15746686, Q15746530, Q15746525, Q15746505, Q15746502, Q15746490, Q15746414, Q15746159, Q15746155, Q15746151, Q15746142, Q15746141, Q15746137, Q15746130, Q15745485, Q15745398, Q15734637, Q15734636, Q15734627, Q15734620, Q15734617, Q15734614, Q15733002, Q1572540, Q15724332, Q15724318, Q15716628, Q15716625, Q15716575, Q15716510, Q15716472, Q15716459, Q15716455, Q15716432, Q15716415, Q15716320, Q15716311, Q15710168, Q15710149, Q15710147, Q15710144, Q15710019, Q15710011, Q15710010, Q15710008, Q15709999, Q15709997, Q15709994, Q15709992, Q15709983, Q15709942, Q15708889, Q15708867, Q15708755, Q15708751, Q15707782, Q15707591, Q15707472, Q15707255, Q15707062, Q1550212, Q1541522, Q1533284, Q15275990, Q15266587, Q1526607, Q1453509, Q1409380, Q1399128, Q1384169, Q135989947, Q96324577, Q135927579, Q135927554, Q135927486, Q135927476, Q135927455, Q135927435, Q135927414, Q135926953, Q135792875, Q135742290, Q135741867, Q135741819, Q135741794, Q135741784, Q135741778, Q135741574, Q135656009, Q135654478, Q135654430, Q135654421, Q135336822, Q13434884, Q13416949, Q13375921, Q131938890, Q131824610, Q1317529, Q131350232, Q131178653, Q131178535, Q131144126, Q13090965, Q130545602, Q130324649, Q130322070, Q1283097, Q12806662, Q12799548, Q1277520, Q127599661, Q1273053, Q126942417, Q1268287, Q12646949, Q12645928, Q1263938, Q1248438, Q124351504, Q124338426, Q124335808, Q124150526, Q12360657, Q12360180, Q12358496, Q123370190, Q12306444, Q12281904, Q1225348, Q1217470, Q12159072, Q1213559, Q120769266, Q12057714, Q12055873, Q1205540, Q12005743, Q11999656, Q11956877, Q11939515, Q119269544, Q11847919, Q11835070, Q11835066, Q11828478, Q11826633, Q11776816, Q116885635, Q116879650, Q114835, Q11379546, Q113279960, Q11169709, Q111522971, Q111218992, Q111198802, Q11116417, Q109616201, Q1074755, Q107192447, Q10669319, Q10662410, Q106490184, Q105710857, Q105710422, Q1053506, Q10524626, Q10524607, Q105015370, Q104527696, Q104527492, Q104503263, Q104439870, Q104144852, Q1032140, Q10321024, Q102828991, Q102828968, Q102828874, Q102828857, Q102828140, Q102828056, Q102827878, Q102827352, Q102825251, Q102487803, Q102479616, Q102477416, Q102472677, Q102467345, Q102444512, Q102424292, Q102395805, Q102290824, Q101010757, Q100791855, Q1004394, Q1004380, ';
		}

	function loadDOAJData() {
            document.getElementById('qidInput').value = 'Q50534626, Q96700067, Q50815451, Q28779741, Q50816324, Q96702349, Q4177689, Q50817379, Q96720517, Q96705329, Q84563357, Q26849536, Q18086232, Q96726813, Q87119344, Q96716147, Q96729749, Q96726929, Q96328664, Q50478701, Q96709141, Q50817901, Q15750963, Q50816774, Q63292058, Q28446771, Q50817684, Q50816375, Q15756626, Q29155972, Q96723638, Q96708158, Q50432823, Q50434997, Q116187787, Q96725244, Q50811208, Q27722316, Q124213917, Q12009773, Q50816573, Q96720759, Q124423912, Q111198802, Q96700463, Q96711632, Q96724149, Q50481537, Q96726383, Q96701468, Q12362405, Q96333985, Q15753565, Q73903826, Q50817399, Q73903874, Q96700365, Q57315441, Q15816439, Q96701080, Q1936640, Q50815068, Q96697297, Q50817189, Q96736626, Q96702756, Q50815648, Q96722730, Q56878058, Q96731253, Q96700051, Q125954425, Q96702983, Q116187798, Q50518217, Q96733504, Q96724379, Q96705652, Q21385166, Q116885635, Q96700717, Q15749360, Q50817152, Q50565384, Q4943578, Q96698250, Q2844846, Q50516616, Q116187793, Q96702841, Q56355573, Q96702805, Q50817484, Q50806598, Q96702825, Q50815665, Q96728046, Q96703026, Q96725883, Q62083846, Q50426299, Q134971248, Q101247086, Q96708517, Q15762519, Q99415734, Q96724269, Q15764348, Q96710223, Q50817329, Q50814837, Q50815766, Q131294086, Q96708965, Q50815739, Q102290752, Q135984874, Q9311494, Q96737334, Q50808226, Q96735325, Q130545602, Q96733136, Q50515627, Q15746130, Q131380051, Q28673901, Q50808293, Q96737342, Q96726579, Q96725887, Q50516842, Q50432937, Q50434998, Q50816296, Q50516908, Q11747893, Q50810554, Q50808378, Q28674093, Q96735816, Q3293214, Q51879325, Q27715871, Q65947129, Q15755314, Q50811612, Q116729763, Q15761126, Q50810543, Q50516912, Q124099467, Q96736900, Q116187800, Q96701520, Q50811119, Q50552854, Q15817842, Q27722633, Q50552738, Q51444663, Q96734070, Q27715504, Q12079299, Q96697496, Q50434728, Q50553164, Q9098860, Q73908557, Q50398672, Q96706636, Q96705752, Q15760254, Q50811023, Q56359465, Q96698140, Q96719286, Q27715768, Q96709803, Q27963511, Q96735171, Q73908614, Q96738440, Q96703447, Q96736758, Q12785080, Q28340499, Q50811453, Q96719047, Q96734021, Q96701388, Q96705999, Q50816161, Q27653875, Q116187803, Q31729699, Q50668190, Q96734130, Q50806959, Q50432937, Q27715762, Q9148687, Q50498055, Q96708998, Q9386958, Q15762944, Q123685617, Q55760336, Q15762206, Q50434688, Q50516632, Q50498051, Q6044456, Q15757182, Q124349818, Q27722250, Q7628069, Q73908461, Q96705686, Q31185385, Q108801474, Q50810821, Q96708241, Q50815556, Q135901207, Q96704165, Q50817339, Q2129103, Q50497996, Q113240602, Q96706805, Q50814354, Q50812594, Q11828447, Q96463974, Q96708986, Q108122042, Q50435001, Q50817640, Q114240, Q2868640, Q50815176, Q50814389, Q50816424, Q2928071, Q2928074, Q20529522, Q15755345, Q3060776, Q23006303, Q50557924, Q96328366, Q105710422, Q96734484, Q96722490, Q11751600, Q96715750, Q50812579, Q15750599, Q96699888, Q21057404, Q7380417, Q64507619, Q50811086, Q15752927, Q96734664, Q73908768, Q91314290, Q63991660, Q96708262, Q96733126, Q135430657, Q50816131, Q33310486, Q96733794, Q96732382, Q27716109, Q50815108, Q124350693, Q65929183, Q50810943, Q104422107, Q117359270, Q27718620, Q15766912, Q49638096, Q96706396, Q50426380, Q50518133, Q96725992, Q50814474, Q11956877, Q50817212, Q55344392, Q11828478, Q85097495, Q96699765, Q96695832, Q50481547, Q50534447, Q27921636, Q96723634, Q96701961, Q27715578, Q13090965, Q5275881, Q96718685, Q96716255, Q96696289, Q27715772, Q96717112, Q15752340, Q50521463, Q96701995, Q73896669, Q96730831, Q96703939, Q50816349, Q96706124, Q50817754, Q27716269, Q1324189, Q15758782, Q91316190, Q5773182, Q113279960, Q107682727, Q110891844, Q96327778, Q73903833, Q27726393, Q96724878, Q50808176, Q65048150, Q52085282, Q96326422, Q96721782, Q96733064, Q96716480, Q96719437, Q96706432, Q96695810, Q96324490, Q15766113, Q115342451, Q96732172, Q50810950, Q96719473, Q15750864, Q50817526, Q28868226, Q50520846, Q50552787, Q29044009, Q50515777, Q96702532, Q126337131, Q54131776, Q50817155, Q50815300, Q27721518, Q50403141, Q50434977, Q105528946, Q96737335, Q50810735, Q28363416, Q27710107, Q50478590, Q776411, Q21645886, Q50814447, Q134971256, Q50552553, Q96730180, Q50811314, Q50816338, Q96702542, Q4246721, Q4067169, Q96333938, Q96722659, Q50814676, Q116687086, Q28045170, Q96333967, Q96329916, Q96734110, Q6431659, Q60686370, Q96695774, Q50534310, Q50552752, Q133700330, Q3100810, Q50814503, Q50815455, Q111345384, Q50811402, Q15766535, Q50534379, Q96698175, Q96723974, Q96706409, Q3537383, Q20107834, Q50817341, Q15752793, Q627517, Q15749606, Q50814621, Q27722248, Q3592634, Q111974535, Q15758595, Q96736729, Q55410600, Q96698964, Q96327352, Q96730512, Q50553208, Q64508662, Q96721333, Q15761824, Q4850220, Q63171041, Q27716025, Q25473464, Q50814602, Q50810575, Q50515506, Q3045694, Q50815215, Q6041301, Q96721247, Q124473660, Q15752692, Q111969431, Q27996900, Q96734888, Q15754723, Q11821770, Q56869084, Q96723775, Q96701598, Q73896629, Q96705943, Q50534450, Q96700474, Q124214415, Q50817555, Q124247899, Q84588333, Q50553174, Q96707629, Q96696101, Q9340621, Q96701965, Q96724132, Q91569362, Q96733029, Q96703446, Q96704470, Q50808209, Q96723300, Q50811171, Q27724978, Q119269544, Q96706593, Q50817070, Q50812348, Q50515809, Q96726392, Q21385393, Q135430823, Q23786576, Q96707822, Q96705756, Q3552211, Q96701118, Q15750435, Q96701605, Q96702809, Q34606812, Q96702967, Q104313374, Q135430847, Q96701155, Q50534517, Q96723731, Q135430960, Q134467407, Q3387811, Q50435018, Q96704427, Q15753571, Q50816393, Q17421626, Q96737350, Q50478579, Q3428686, Q55397534, Q135430967, Q50816773, Q50816377, Q124098705, Q96702782, Q112679466, Q96330661, Q2928102, Q106367438, Q96724410, Q50815091, Q15754237, Q96728077, Q15754200, Q96700155, Q109381818, Q96737789, Q96723830, Q96330434, Q50432848, Q54354862, Q96725761, Q96732194, Q15759407, Q50478559, Q135430596, Q50817054, Q96706350, Q96733001, Q50817365, Q50534592, Q27715951, Q50557927, Q24525536, Q15750286, Q50518146, Q96736881, Q132776853, Q27716108, Q50534458, Q96724000, Q96704849, Q16610651, Q50812222, Q96704031, Q125613294, Q50434968, Q96730135, Q15765731, Q15764191, Q3428625, Q96732896, Q96732749, Q88536414, Q1888231, Q50812390, Q15757370, Q98687998, Q96736500, Q3186853, Q96329083, Q50517002, Q124249302, Q71243926, Q96721236, Q105571847, Q50814375, Q96723827, Q50807248, Q96730261, Q100138553, Q96720605, Q124375805, Q124214125, Q15746582, Q11776816, Q96727502, Q96724879, Q125189988, Q3094813, Q28603621, Q50516691, Q50816526, Q27722615, Q96724527, Q27927731, Q96727721, Q110962895, Q96733181, Q1613143, Q96729561, Q27718437, Q96695641, Q64499574, Q96696267, Q9158960, Q96737788, Q65947267, Q96721036, Q3521443, Q124365199, Q3346085, Q103983597, Q50478619, Q96721378, Q96702562, Q50817579, Q96335112, Q15752899, Q96721908, Q50816505, Q96719415, Q15757138, Q9338523, Q96721422, Q96723413, Q50817854, Q50552654, Q50811201, Q15751916, Q113291268, Q15763491, Q20035219, Q3894857, Q50811181, Q15817670, Q96724354, Q62697882, Q135927579, Q88351667, Q50534524, Q96722994, Q68825609, Q116681177, Q50552668, Q104456413, Q123679367, Q27721630, Q50557923, Q15763457, Q104312292, Q105712889, Q96713041, Q50811771, Q15755235, Q50816770, Q50816155, Q50810775, Q15754898, Q96731236, Q50816888, Q50808193, Q6729642, Q96716524, Q50552565, Q50668359, Q2933121, Q15754890, Q108299965, Q96719932, Q50431732, Q96712800, Q50817607, Q50814702, Q50814765, Q96699259, Q50817986, Q50434849, Q50817545, Q28841195, Q50817623, Q15760251, Q15817935, Q50814991, Q96720722, Q50811115, Q116187796, Q99066908, Q123435183, Q3592588, Q96721219, Q15759472, Q96723178, Q50817946, Q130331231, Q50815179, Q2967475, Q5467514, Q29439056, Q1655827, Q96726155, Q125399251, Q96704186, Q50808308, Q15757315, Q117359297, Q50481548, Q50815639, Q50552740, Q50426525, Q50432892, Q50816694, Q50812583, Q50553217, Q50534390, Q50761434, Q6450229, Q104696213, Q15759272, Q50816510, Q50497421, Q15817570, Q50520918, Q50814985, Q15755022, Q50534594, Q24944193, Q28674084, Q96703267, Q96717912, Q96717717, Q96733804, Q50553172, Q96726327, Q96732891, Q50808312, Q96731861, Q15755175, Q96725760, Q15750780, Q124214057, Q50553190, Q50434812, Q124335808, Q96725980, Q96699525, Q50434980, Q50497990, Q20181769, Q96717870, Q15765000, Q96733005, Q15766997, Q96732251, Q96704340, Q15758041, Q96721098, Q15817876, Q50811059, Q96731245, Q186065, Q27722314, Q135656009, Q6168014, Q50668306, Q96724391, Q96730316, Q96724024, Q50434806, Q120769273, Q50478544, Q27716178, Q115460438, Q28671811, Q135431037, Q113289433, Q74435473, Q130241045, Q96701295, Q85747319, Q15749624, Q96738165, Q96735929, Q96325750, Q50814607, Q52158487, Q96726555, Q96737088, Q104246110, Q50810909, Q15816965, Q96726731, Q96738229, Q73896663, Q9138991, Q116599850, Q50814387, Q15758351, Q50516972, Q50811184, Q21385093, Q50814370, Q50516838, Q15745236, Q50497424, Q15817789, Q99194075, Q27722313, Q53953325, Q28807311, Q964573, Q15745353, Q96733855, Q130266048, Q111218992, Q15752909, Q50552749, Q96732664, Q50817955, Q15761473, Q96711718, Q50811783, Q116187778, Q96327728, Q50816368, Q108801498, Q117053121, Q113279629, Q31192661, Q96732405, Q96706645, Q96695425, Q96719920, Q73881544, Q15757205, Q50520841, Q96707417, Q28976784, Q15746413, Q96707741, Q50521547, Q15752339, Q57083089, Q4777701, Q50817802, Q50497950, Q74435181, Q96714489, Q50817935, Q50812357, Q96727357, Q50425207, Q123482191, Q135927414, Q9332699, Q55060349, Q15765193, Q15753413, Q104413758, Q48214, Q96703799, Q50814767, Q27922070, Q440770, Q89589356, Q15759587, Q96331398, Q63883093, Q96706516, Q50806959, Q50817933, Q27716483, Q28807408, Q50499489, Q96706548, Q15751672, Q96719748, Q50521435, Q50811116, Q50815064, Q15759353, Q16856040, Q96702777, Q50432906, Q15756060, Q96733919, Q15765688, Q15756872, Q15765360, Q50815069, Q25436122, Q18215981, Q50806762, Q15716320, Q2258877, Q50552742, Q96697616, Q96328604, Q50521783, Q11996239, Q15764884, Q50816582, Q50815334, Q5533459, Q76998312, Q15755264, Q50403023, Q15749686, Q114980140, Q50497420, Q4807726, Q6107109, Q5275927, Q122619874, Q24525433, Q9312720, Q1230581, Q96715673, Q50806844, Q17619382, Q53625119, Q96721538, Q50668754, Q1127321, Q50552833, Q96321234, Q21386058, Q96699456, Q96330345, Q96720095, Q15816908, Q96704346, Q96464019, Q50816053, Q50808362, Q17619372, Q50811444, Q124150526, Q96725889, Q50520781, Q3186898, Q50817677, Q50432737, Q126279964, Q50552832, Q30765655, Q50812178, Q98526206, Q50435000, Q96734674, Q124212513, Q96731495, Q96703889, Q16630018, Q124351504, Q96327894, Q107533043, Q50478743, Q50811394, Q135430539, Q96700130, Q15752920, Q9373723, Q12163682, Q50814978, Q79009919, Q50810738, Q126725109, Q15762585, Q50553214, Q96715625, Q50426444, Q7714670, Q135654421, Q2571450, Q50808154, Q50817512, Q96732934, Q15761124, Q50815079, Q27063807, Q96701599, Q15751660, Q50497832, Q50815691, Q50434863, Q50817382, Q50817893, Q117359308, Q96721380, Q96709152, Q11895954, Q27723764, Q50761446, Q15764647, Q5823610, Q28673263, Q50815449, Q96735012, Q50811125, Q96734604, Q11692034, Q50504637, Q111724875, Q50815770, Q50434867, Q96698326, Q15759118, Q96326047, Q96326282, Q50520896, Q135430784, Q28343468, Q50814383, Q50816386, Q96733852, Q96730406, Q96732487, Q15751157, Q96708730, Q135741574, Q50816150, Q96703574, Q15759738, Q3026028, Q96704918, Q111541958, Q50497955, Q50816943, Q636851, Q96727568, Q24525533, Q96699556, Q50515591, Q15817775, Q96705863, Q15750865, Q96724353, Q73908428, Q15764877, Q21385504, Q50515299, Q96727882, Q36937339, Q50817232, Q42240, Q96333963, Q15765011, Q50481538, Q47458812, Q50814771, Q1550212, Q15763968, Q96701382, Q124101823, Q15817775, Q50815668, Q50518116, Q96719884, Q50817891, Q50667959, Q96706435, Q27723794, Q55810461, Q15762599, Q96320416, Q315571, Q15762500, Q27927734, Q96719003, Q96730109, Q27721517, Q50811794, Q50812498, Q15764790, Q50553149, Q115284156, Q30708491, Q96729954, Q50815303, Q50815442, Q51398017, Q96733073, Q11379546, Q50817544, Q27721697, Q50552555, Q48842513, Q50816469, Q96730747, Q96726223, Q114732262, Q15766572, Q96718055, Q50808350, Q50557964, Q50812145, Q50497476, Q50810884, Q15756812, Q15751449, Q50816513, Q96704666, Q50808237, Q96730417, Q27726989, Q17619406, Q27715124, Q50434983, Q27715122, Q50810538, Q26438883, Q96706554, Q96696131, Q15763012, Q50815153, Q9347375, Q15759112, Q15762598, Q15754002, Q15763855, Q106650487, Q50817939, Q58237155, Q50434822, Q15746649, Q10669319, Q50497898, Q96703790, Q59468117, Q9347342, Q15754928, Q50814309, Q9173848, Q96731681, Q50815669, Q96333665, Q4041877, Q7570482, Q15761074, Q50817989, Q7012392, Q96707410, Q50810476, Q96735393, Q37930432, Q50815235, Q96730421, Q1665993, Q96328934, Q96330662, Q96705783, Q96728114, Q74435057, Q50807174, Q8027036, Q27727579, Q50811044, Q96326012, Q15758990, Q96706569, Q50817015, Q135927486, Q2218162, Q28446295, Q27716601, Q46863078, Q50816454, Q50426542, Q50811213, Q124375685, Q15765260, Q131350232, Q127162107, Q50497748, Q15750602, Q20547152, Q73551783, Q4033501, Q50817782, Q50817468, Q96698882, Q96722877, Q62080015, Q50432966, Q96696443, Q50816374, Q15753561, Q104439870, Q25415648, Q28807313, Q5690746, Q50808304, Q50808302, Q15751392, Q6055440, Q96721232, Q50515475, Q50814689, Q50497620, Q50814449, Q5732717, Q96734671, Q23889071, Q7132760, Q65929200, Q50518124, Q101246290, Q4996847, Q6445019, Q27723088, Q11052884, Q15749627, Q50814591, Q50815075, Q50497615, Q96726791, Q131332318, Q27715745, Q5774576, Q50815190, Q105083069, Q96332072, Q27912161, Q15767157, Q6425531, Q15751671, Q26305317, Q383918, Q27922295, Q27725763, Q15716592, Q96734470, Q50814530, Q106259434, Q131008443, Q64521835, Q96731189, Q96321062, Q50816220, Q96328236, Q15746460, Q96737907, Q50817572, Q7318491, Q50810536, Q50639865, Q96736599, Q27722249, Q50497922, Q15753565, Q15753311, Q15753564';
		}

    function parseQIDs(input) {
        return input
            .split(/[\s,\n\r]+/)
            .map(qid => qid.trim().toUpperCase())
            .filter(qid => qid.match(/^Q\d+$/))
            .filter((qid, index, self) => self.indexOf(qid) === index);
    }

    async function fetchEntities(qids) {
        const qidString = qids.join('|');
        const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${qidString}&format=json&origin=*&languages=en&props=labels|claims`;
        
        const response = await fetch(url);
        const data = await response.json();
        
        if (!data.entities) throw new Error('Réponse invalide de la part de l\'API de Wikidata');

        const entities = [];
        for (const [qid, entity] of Object.entries(data.entities)) {
            if (entity.missing) continue;

            const processedEntity = {
                qid: qid,
                label: entity.labels?.en?.value || qid,
                website: extractWebsite(entity.claims),
                subjects: await extractSubjects(entity.claims)
            };

            entities.push(processedEntity);
        }

        return entities;
    }

    function extractWebsite(claims) {
        if (!claims || !claims.P856) return null;
        const websiteClaim = claims.P856[0];
        return websiteClaim.mainsnak?.datavalue?.value || null;
    }

    async function extractSubjects(claims) {
        if (!claims || !claims.P921) return [];

        const subjectIds = claims.P921
            .map(claim => claim.mainsnak?.datavalue?.value?.id)
            .filter(Boolean);

        if (subjectIds.length === 0) return [];

        const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${subjectIds.join('|')}&format=json&origin=*&languages=en&props=labels`;
        const response = await fetch(url);
        const data = await response.json();

        return subjectIds.map(id => ({
            id,
            label: data.entities[id]?.labels?.en?.value || id
        }));
    }

    function countSubjects() {
        subjectCounts.clear();
        allEntities.forEach(entity => {
            entity.subjects.forEach(subject => {
                if (allowedSubjects.has(subject.id)) {
                    if (!subjectCounts.has(subject.id)) {
                        subjectCounts.set(subject.id, { label: subject.label, count: 0 });
                    }
                    subjectCounts.get(subject.id).count++;
                }
            });
        });
    }

    function displayFilterButtons() {
        const container = document.getElementById('filterButtons');
        container.innerHTML = '';

        const sortedSubjects = Array.from(subjectCounts.entries())
            .sort((a, b) => b[1].count - a[1].count || a[1].label.localeCompare(b[1].label));

        sortedSubjects.forEach(([id, data]) => {
            const button = document.createElement('button');
            button.className = 'filter-btn';
            button.onclick = () => toggleFilter(id);
            button.setAttribute("data-id", id);
            button.innerHTML = `<span>${data.label}</span><span class="filter-count">${data.count}</span>`;
            container.appendChild(button);
        });

        if (sortedSubjects.length > 0) {
            document.getElementById('filterSection').classList.add('show');
        }
    }

    function toggleFilter(subjectId) {
        if (activeFilters.has(subjectId)) {
            activeFilters.delete(subjectId);
        } else {
            activeFilters.add(subjectId);
        }
        updateFilterButtons();
        applyFilters();
        displayResults();
    }

    function updateFilterButtons() {
        const buttons = document.querySelectorAll('.filter-btn');
        buttons.forEach(button => {
            const subjectId = button.getAttribute("data-id");
            button.classList.toggle('active', activeFilters.has(subjectId));
        });
    }

    function clearAllFilters() {
        activeFilters.clear();
        updateFilterButtons();
        applyFilters();
        displayResults();
    }

    function applyFilters() {
        if (activeFilters.size === 0) {
            filteredEntities = [...allEntities];
        } else {
            filteredEntities = allEntities.filter(entity => {
                return Array.from(activeFilters).every(filterId => 
                    entity.subjects.some(s => s.id === filterId)
                );
            });
        }
    }

    function displayResults() {
        const tbody = document.getElementById('resultsTableBody');
        tbody.innerHTML = '';

        filteredEntities.forEach(entity => {
            const row = document.createElement('tr');

            const websiteCell = entity.website 
                ? `<a href="${entity.website}" target="_blank" class="qid-link">Site web</a>`
                : '<span class="no-data">No website</span>';

            const subjectsCell = entity.subjects.length > 0
				? `<div class="subject-tags">${
					entity.subjects
					  .filter(s => !["Q1066186",    // remove study of history
					                 "Q309",        // remove history
									 ].includes(s.id)) // remove unwanted QIDs for better readability of the table 
					  .map(s => `<span class="subject-tag">${s.label}</span>`)
					  .join('')
				  }</div>`
				: '<span class="no-data">No subjects</span>';


            row.innerHTML = `
                <td><a href="https://www.wikidata.org/wiki/${entity.qid}" target="_blank" class="qid-link">${entity.qid}</a></td>
                <td><strong>${entity.label}</strong></td>
                <td><small>${websiteCell} + <a href="https://umontreal.on.worldcat.org/search?queryString=ti:(${entity.label})&format=Jrnl&subformat=Jrnl::jrnl_digital&changedFacet=format" target="_blank" class="qid-link">Rech. Sofia UdeM</a><small></td>
                <td>${subjectsCell}</td>
            `;
            
            tbody.appendChild(row);
        });

        const activeFiltersText = activeFilters.size > 0 
            ? ` (filtered by: ${Array.from(activeFilters).join(', ')})` 
            : '';
        document.getElementById('resultsCount').textContent = 
            `Affiche ${filteredEntities.length} de ${allEntities.length} entités${activeFiltersText}`;
    }

    function showLoading(show) {
        document.getElementById('loading').classList.toggle('show', show);
    }

    function showError(message) {
        const error = document.getElementById('error');
        error.textContent = message;
        error.classList.add('show');
    }

    function hideError() {
        document.getElementById('error').classList.remove('show');
    }

    function showResults() {
        document.getElementById('resultsSection').classList.add('show');
    }

    function hideResults() {
        document.getElementById('resultsSection').classList.remove('show');
        document.getElementById('filterSection').classList.remove('show');
    }
</script>

</body>
</html>
